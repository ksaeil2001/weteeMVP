# F-008: 필수 알림 시스템

**버전**: v1.1  
**작성일**: 2025-11-04  
**최종 수정일**: 2025-11-11  
**우선순위**: 1단계 MVP  
**작성자**: Claude

---

## 작성 전 체크리스트 ✅

```
[✓] 문제 정의서에서 관련 부분 다시 읽음
[✓] 경쟁 제품의 유사 기능 조사 완료
[✓] 이 기능과 연결된 다른 기능 목록 작성
[✓] 기술 용어 사용하지 않기로 다짐함
```

---

## 1. 이 기능은 왜 필요한가?

### 한 문장 요약
> 수업 일정, 출결 변동, 정산 요청 등 과외 관리의 중요한 순간마다 선생님, 학생, 학부모에게 자동으로 알려주어 카톡으로 일일이 공지하는 번거로움을 없앤다.

### 문제 정의서와의 연결

**해결하는 문제**: 문제 2 - 일정 조율 및 보강 수업 관리의 복잡성

리서치 결과에 따르면, 과외 선생님들은 **수업 리마인더를 일일이 카톡으로 보내는 것**에 큰 부담을 느끼고 있습니다:

> 인터뷰에서 선생님은 "보강 수업의 경우 잊어먹지 않게 보강 하루 전, 당일 아침 다시 카톡으로 공지"해야 하는 번거로움을 토로했습니다.

또한 정산과 관련해서도:

> "매번 안내드리는게 좀 귀찮다. 혹은 안 보내주시면 여러번 안내드려야 함"

온라인 리서치에서도 다음과 같은 필요성이 확인되었습니다:

> "자동 알림 및 리마인더: 수업 전 알림(예: 수업 당일 아침 푸시)과 과제 마감 리마인더 등을 도입하여, 선생님·학생 모두 중요한 일정을 놓치지 않도록 합니다. 이는 출결율 제고와 학습 관리에 실제 도움이 되는 것으로 나타났으므로 적극 반영합니다."

### 왜 다른 도구로 안 되는가?

**현재 사용자들이 쓰는 방법**:
- **카카오톡**: 수업 전마다 일일이 메시지 전송 → 한계: 시간이 많이 걸리고, 깜빡하면 학생이 수업을 빼먹음. 7명의 학생을 관리하면 매일 여러 번 메시지를 보내야 함
- **구글 캘린더 알림**: 개인 일정에만 알림 → 한계: 학생/학부모에게는 알림이 가지 않음. 학부모는 자녀의 수업 일정을 모름
- **수동 전화**: 급한 경우 전화로 연락 → 한계: 전화가 안 받아질 수도 있고, 매번 전화하기엔 부담스러움

**경쟁 제품의 한계**:
- **수업기록노트**: "자동 알림이나 학생측 앱 연동, 온라인 결제 기능 등은 없어서 순전히 기록/계산 도구 역할에 머물고" 있음. 알림은 선생님 본인에게만 가능
- **과릿**: 선생님-학생 간 소통은 지원하지만 체계적인 알림 시스템은 부족. 학부모에게는 공유만 가능하고 자동 알림 없음
- **김과외**: 플랫폼 내에서만 알림 가능, 자체 매칭된 과외만 지원

### 우리의 접근 방식

이 기능은 과외 관리의 핵심 이벤트(수업 임박, 출결 변동, 정산 요청, 수업 기록 공유)를 자동으로 감지하여, 관련된 모든 사람(선생님, 학생, 학부모)에게 푸시 알림으로 즉시 전달합니다. 선생님은 더 이상 카톡으로 일일이 공지할 필요가 없고, 학생과 학부모는 중요한 순간을 놓치지 않게 됩니다. F-007에서 설정한 알림 설정(야간 알림 제한, 알림 종류별 on/off)을 존중하여 발송합니다.

---

## 2. 사용자 시나리오

### 시나리오 1: 수업 전 자동 리마인더 (선생님 & 학생)

**배경**: 
김선생님은 오늘 오후 3시에 이학생과 수학 수업이 있습니다. 이학생은 가끔 수업 시간을 깜빡하곤 합니다. 김선생님은 예전에는 매번 수업 1시간 전에 카톡을 보냈지만, 이제는 앱이 자동으로 알려줍니다.

**전제 조건**:
- 김선생님과 이학생은 이미 그룹으로 연결되어 있다
- 오늘 오후 3시에 수업 일정이 등록되어 있다
- 김선생님과 이학생 모두 "수업 리마인더" 알림을 켜놨다 (F-007 설정)
- 현재 시간: 오후 1시

**단계**:

1. **앱이 자동으로 시간 확인**
   - 오후 2시가 되자, 시스템이 "1시간 후 수업" 조건을 감지
   
2. **선생님과 학생에게 푸시 알림 발송**
   - 김선생님의 폰에 알림 뜸: "🔔 1시간 후 수업: 이학생 - 수학 (오후 3시)"
   - 이학생의 폰에도 알림 뜸: "🔔 1시간 후 수업: 김선생님 - 수학 (오후 3시)"
   
3. **알림을 탭하면 수업 상세 화면으로 이동**
   - 수업 정보: 날짜, 시간, 장소, 과목
   - "지도 보기" 버튼 (장소가 등록된 경우)
   - "선생님께 연락하기" 버튼 (학생 뷰)

**결과**:
- 김선생님은 카톡을 보내지 않아도 됨
- 이학생은 수업을 깜빡하지 않음
- 두 사람 모두 제시간에 수업 장소에 도착

---

### 시나리오 2: 학부모에게 수업 기록 공유 알림

**배경**: 
김선생님이 오늘 수업을 마치고 수업 기록을 작성했습니다 (F-005). 이학생의 학부모인 박학부모님은 자녀의 수업 내용을 늘 궁금해합니다.

**전제 조건**:
- 김선생님이 수업 기록을 작성하고 "저장" 버튼을 누름
- 박학부모님은 "수업 기록 업데이트" 알림을 켜놨다 (F-007 설정)
- 박학부모님은 이학생의 학부모로 그룹에 연결되어 있다

**단계**:

1. **김선생님이 수업 기록 저장**
   - "오늘 이차방정식 기본 개념 학습. 이해도 높음. 숙제: 문제집 50-52쪽" 입력 후 "저장"
   
2. **시스템이 자동으로 박학부모님에게 알림 발송**
   - 박학부모님의 폰에 알림 뜸: "📝 김선생님이 11/4 수업 기록을 작성했어요"
   
3. **박학부모님이 알림을 탭**
   - 수업 기록 상세 화면 열림
   - 날짜, 진도, 숙제, 선생님 코멘트 확인 가능
   - 하단에 "감사 메시지 보내기" 버튼 (선택)

**결과**:
- 김선생님은 별도로 카톡이나 문자로 진도를 보낼 필요 없음
- 박학부모님은 실시간으로 자녀의 학습 상황 파악
- 투명성 증가, 신뢰 향상

---

### 시나리오 3: 정산 요청 알림 (학부모에게)

**배경**: 
11월이 끝나고 김선생님이 이번 달 수업료를 정산합니다 (F-006). 이번 달에는 총 8회 수업이 진행되었고, 회당 5만원이므로 40만원을 받아야 합니다.

**전제 조건**:
- 김선생님이 정산 화면에서 "청구서 발송" 버튼을 누름
- 박학부모님은 "정산 알림"을 켰다 (F-007 설정, 이 알림은 끌 수 없음 - 필수)
- 결제 딥링크가 생성됨

**단계**:

1. **김선생님이 청구서 발송**
   - 정산 화면에서 11월 수업 내역 확인
   - "청구서 발송" 버튼 탭
   - 확인 다이얼로그: "박학부모님에게 40만원 청구서를 발송하시겠습니까?" → "발송"
   
2. **박학부모님에게 푸시 알림**
   - 폰에 알림 뜸: "💳 11월 수업료 40만원 결제 요청 (8회 수업)"
   
3. **박학부모님이 알림을 탭**
   - 정산 상세 화면 열림
   - 수업 내역: 날짜별 리스트 (8개)
   - 금액 계산: 8회 × 50,000원 = 400,000원
   - "결제하기" 버튼 (카카오페이/토스/네이버페이 선택)
   
4. **결제 완료 후 김선생님에게 알림**
   - 김선생님의 폰에 알림 뜸: "✅ 박학부모님이 11월 수업료를 결제했어요"

**결과**:
- 김선생님은 "수업료 입금 부탁드립니다" 메시지를 보내지 않아도 됨
- 박학부모님은 청구 내역을 투명하게 확인 가능
- 결제가 빠르게 이루어지고, 완료 알림으로 양측 모두 안심

---

### 시나리오 4: 출결 변동 알림 (학생 결석 시)

**배경**: 
오늘 오후 3시에 수업이 있었는데, 이학생이 갑자기 아파서 결석했습니다. 김선생님이 출결을 "결석"으로 체크합니다 (F-004).

**전제 조건**:
- 오늘 오후 3시 수업 일정이 있다
- 김선생님이 출결 관리 화면에서 "결석" 선택
- 이학생과 박학부모님 모두 "출결 변동 알림"을 켰다

**단계**:

1. **김선생님이 출결 체크**
   - 출결 관리 화면에서 오늘 수업 선택
   - "결석" 버튼 탭
   - (선택) 메모 입력: "학생이 감기로 결석"
   
2. **이학생과 박학부모님에게 알림**
   - 이학생 폰: "❌ 11/4 수업이 결석 처리되었습니다"
   - 박학부모님 폰: "❌ 이학생님의 11/4 수업이 결석 처리되었습니다"
   
3. **알림을 탭하면 출결 상세 화면**
   - 출결 상태: 결석
   - 선생님 메모: "학생이 감기로 결석"
   - "보강 신청하기" 버튼 (학생 뷰)

**결과**:
- 출결 변동 사항이 실시간으로 공유됨
- 학부모는 자녀가 수업에 갔는지 안 갔는지 즉시 알 수 있음
- 보강 신청 버튼으로 바로 다음 단계로 연결

---

### 시나리오 5: 보강 시간 오픈 알림 (학생들에게)

**배경**: 
김선생님이 이번 주말에 보강 가능한 시간대를 오픈했습니다 (F-003). 결석했던 학생들에게 보강 신청 기회를 주고 싶습니다.

**전제 조건**:
- 김선생님이 "보강 가능 시간 오픈" 화면에서 시간대 등록
- 대상 그룹: "이학생 그룹"
- 이학생은 "일정 변동 알림"을 켰다

**단계**:

1. **김선생님이 보강 시간 오픈**
   - 11/9(토) 오전 10시-12시, 오후 2시-4시 등록
   - "오픈하기" 버튼 탭
   
2. **이학생에게 알림**
   - 폰에 알림 뜸: "📅 선생님이 보강 가능한 시간을 올렸어요"
   
3. **이학생이 알림을 탭**
   - 보강 신청 화면 열림
   - 11/9(토) 오전 10시-12시 [선택 가능]
   - 11/9(토) 오후 2시-4시 [선택 가능]
   - 원하는 시간대 선택 → "신청하기"
   
4. **김선생님에게 알림**
   - 폰에 알림 뜸: "✅ 이학생님이 11/9(토) 오전 10-12시 보강을 신청했어요"

**결과**:
- 선생님은 카톡으로 "보강 가능해요" 메시지 안 보내도 됨
- 학생은 즉시 보강 신청 가능
- 빠른 일정 조율

---

### 시나리오 6: 야간 알림 제한 (방해 금지)

**배경**: 
박학부모님은 밤 10시부터 아침 7시까지는 알림을 받고 싶지 않습니다. F-007 설정에서 야간 알림 제한을 켜놨습니다.

**전제 조건**:
- 박학부모님의 야간 알림 제한: 오후 10시 - 오전 7시
- 김선생님이 밤 11시에 내일 수업 기록을 미리 작성함
- 현재 시간: 밤 11시 30분

**단계**:

1. **김선생님이 수업 기록 저장 (밤 11시 30분)**
   - 내일 수업 준비 차원에서 미리 작성
   
2. **시스템이 박학부모님의 알림 설정 확인**
   - 현재 시간(23:30)이 야간 시간대(22:00-07:00)에 해당
   - 알림 발송 보류
   
3. **다음 날 아침 7시에 알림 발송**
   - 아침 7시가 되자 보류된 알림 발송
   - 폰에 알림 뜸: "📝 김선생님이 11/4 수업 기록을 작성했어요"

**결과**:
- 박학부모님은 밤에 잠을 방해받지 않음
- 중요한 정보는 놓치지 않음 (아침에 받음)
- 사용자 경험 향상

---

## 3. 이 기능에서 일어날 수 있는 문제들

### 카테고리 1: 알림 설정 관련

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 사용자가 모든 알림을 껐다 | 알림 안 감 (정상) | 알림 발송 안 함. 단, 정산 알림은 예외 (필수) | 정산 알림만은 항상 발송 |
| 야간 시간대에 알림 발생 | 즉시 알림 안 감 | 야간 종료 시간까지 보류 후 일괄 발송 | 최대 20개까지만 모았다가 발송 |
| 푸시 알림 권한이 꺼져있음 | (OS 레벨에서 차단됨) | 앱 내 알림 센터에만 표시. 다음 앱 실행 시 "알림을 켜주세요" 배너 표시 | 사용자가 OS 설정에서 직접 켜야 함 |
| 정산 알림을 끄려고 시도 | "정산 알림은 금전 거래를 위해 필수입니다" | 토글이 비활성화 상태로 유지 (끌 수 없음) | F-007 참조 |

### 카테고리 2: 알림 전송 오류

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 네트워크 끊김으로 알림 발송 실패 | (사용자는 모름) | 5분 후 재시도, 최대 3회 재시도. 실패 시 로그 저장 | 다음 앱 실행 시 미전송 알림 확인 메시지 |
| 수신자의 폰이 꺼져있음 | (사용자는 모름) | 푸시 서버가 대기, 폰 켜지면 자동 전송 | OS가 처리 |
| 동일한 알림이 중복 발송됨 | 알림이 여러 개 뜸 | 1분 이내 동일 내용 알림은 중복 제거 | 개발 시 중복 방지 로직 필수 |
| 너무 많은 알림이 한꺼번에 발송 (예: 10개 이상) | 알림 10개가 동시에 뜸 | 사용자가 불편할 수 있으므로, 요약 알림 1개로 합침: "새로운 알림 12개" | 2단계에서 개선 예정 |

### 카테고리 3: 타이밍 문제

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 수업이 1시간도 안 남았는데 리마인더가 안 갔다 | "⚠️ 30분 후 수업입니다!" (긴급 알림) | 1시간 전 알림 놓쳤으면 30분 전, 15분 전에 추가 알림 | 중요 |
| 수업 시작 시간이 이미 지났는데 리마인더가 감 | 알림 안 감 (정상) | 수업 시작 시간 이후에는 리마인더 발송 안 함 | 과거 일정은 알림 대상 아님 |
| 수업 일정이 취소되었는데 리마인더가 감 | (이미 알림 갔음) | 취소 알림 추가 발송: "수업이 취소되었습니다" | F-003 참조 |
| 시간대 변경 (해외 여행 등) | 정상 작동 | 사용자의 로컬 시간대 기준으로 알림 발송 | 서버는 UTC, 클라이언트가 변환 |

### 카테고리 4: 사용자 권한 문제

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 그룹에서 탈퇴한 사용자에게 알림 발송 시도 | (알림 안 감) | 탈퇴한 사용자는 알림 대상에서 자동 제외 | F-002 참조 |
| 초대 코드로 가입했지만 아직 그룹 승인 전 | (알림 안 감) | 그룹 승인 완료 후부터 알림 발송 | F-002 참조 |
| 학생이 학부모를 차단했다 | (학부모만 알림 안 감) | 차단 기능은 2단계. MVP에서는 모든 그룹원에게 알림 | - |

### 카테고리 5: 네트워크 및 시스템 오류

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 네트워크 연결 끊김 | (알림 발송 실패) | 재연결 시 자동 재시도. 실패한 알림은 앱 내 알림 센터에 저장 | 다음 앱 실행 시 표시 |
| 서버 응답 지연 | (사용자는 모름) | 30초 타임아웃. 타임아웃 시 재시도 큐에 추가 | 개발팀 모니터링 |
| 푸시 서비스 장애 (Firebase/APNs 다운) | (알림 안 감) | 앱 내 알림 센터에만 저장. 다음 앱 실행 시 확인 가능 | 외부 서비스 의존도 이슈 |
| 사용자가 앱을 삭제했다 | (알림 안 감) | 푸시 토큰 무효화됨. 재설치 후 자동 재등록 | 정상 처리 |

### 카테고리 6: 콘텐츠 관련

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 알림 내용이 너무 길다 (200자 이상) | 앞부분만 표시 + "..." | 푸시 알림은 100자까지, 나머지는 상세 화면에서 확인 | OS 제약 |
| 특수문자/이모지 깨짐 | 정상 표시 | UTF-8 인코딩 사용, 모든 이모지 지원 | 테스트 필수 |
| 수업 기록에 욕설/부적절한 내용 | 정상 발송 (필터링 안 함) | MVP에서는 콘텐츠 필터링 없음. 2단계에서 고려 | 신고 기능은 F-014 |

---

## 4. 비즈니스 규칙

### 알림 발송 타이밍

- **수업 리마인더**: 수업 시작 1시간 전 발송
  - 놓친 경우 30분 전, 15분 전 추가 발송
  - 수업 시작 시간 이후에는 발송 안 함
  
- **수업 기록 알림**: 선생님이 수업 기록 저장 버튼을 누른 직후 즉시 발송
  - 야간 시간대라면 다음 날 아침 발송
  
- **정산 알림**: 선생님이 청구서 발송 버튼을 누른 직후 즉시 발송
  - 야간 시간대에도 예외적으로 즉시 발송 (금전 거래는 중요)
  
- **출결 변동 알림**: 선생님이 출결 체크를 완료한 직후 즉시 발송
  
- **보강 시간 오픈 알림**: 선생님이 보강 시간 오픈 완료한 직후 즉시 발송

### 알림 빈도 제한

- **동일 알림 중복 방지**: 같은 내용의 알림은 1분 이내 중복 발송 안 함
  - 예: 선생님이 수업 기록을 저장하고 1초 뒤 다시 저장해도 알림은 1번만
  
- **하루 최대 알림 개수**: 사용자당 50개
  - 초과 시 "알림이 너무 많습니다. 앱 내 알림 센터에서 확인해주세요" 메시지

- **야간 알림 보류**: 사용자가 설정한 야간 시간대에는 알림 발송 보류
  - 최대 20개까지 모았다가 아침에 일괄 발송
  - 정산 알림은 예외 (즉시 발송)

### 알림 우선순위

높은 순서대로:
1. **정산 알림** (금전 거래, 최우선)
2. **수업 리마인더** (수업 빼먹으면 큰일)
3. **출결 변동 알림** (학부모가 꼭 알아야 함)
4. **수업 기록 알림** (그날 확인 권장)
5. **보강 시간 오픈 알림** (급하지 않음)

### 알림 보관 기간

- **앱 내 알림 센터**: 
  - 알림은 발송 후 90일간 보관됩니다
  - 90일이 지난 알림은 자동으로 삭제됩니다
  - 삭제 전 사용자에게 별도 알림 없음 (앱 용량 관리를 위함)
  - 이유: 오래된 알림은 참고 가치가 낮고, 데이터 용량 증가 방지
  
- **푸시 알림**: 
  - OS(iOS/Android)가 관리 (보통 24시간 후 자동 삭제)
  - 앱에서 제어 불가
  
- **읽음/안 읽음 상태**: 
  - 영구 보관
  - 통계 및 분석 목적으로 사용

### 필수 알림

다음 알림은 사용자가 끌 수 없음 (F-007 설정에서 비활성화):
- **정산 알림**: 금전 거래 관련, 법적 문제 방지
- **시스템 공지**: 서비스 점검, 긴급 공지

### 알림 언어

- **기본 언어**: 한국어
- **다국어 지원**: 2단계에서 추가 (영어, 중국어 등)

---

## 5. 사용자별 권한

### 과외 선생님

#### 할 수 있는 것
- ✅ 모든 종류의 알림 받기 (수업 리마인더, 정산 완료, 보강 신청 등)
- ✅ 자신이 보낸 알림의 읽음 여부 확인 (예: "박학부모님이 청구서를 확인했습니다")
- ✅ 알림 설정 변경 (F-007에서 알림 on/off, 야간 시간 설정)
- ✅ 알림 히스토리 조회 (앱 내 알림 센터)

#### 할 수 없는 것
- ❌ 학생이나 학부모의 알림 설정 변경 - 이유: 각자의 프라이버시 존중
- ❌ 다른 사용자의 알림 읽음 여부 확인 (정산 알림 제외) - 이유: 프라이버시
- ❌ 알림 발송 시간 임의 조정 - 이유: 시스템이 자동으로 최적 시간에 발송

### 학생

#### 할 수 있는 것
- ✅ 수업 리마인더 받기
- ✅ 출결 변동 알림 받기 (본인 출결 관련)
- ✅ 보강 시간 오픈 알림 받기
- ✅ 알림 설정 변경 (F-007)
- ✅ 알림 히스토리 조회

#### 할 수 없는 것
- ❌ 정산 알림 받기 - 이유: 정산은 학부모의 영역. 학생은 금전 거래 불필요
- ❌ 다른 학생의 알림 받기 - 이유: 그룹이 다르면 알림도 다름
- ❌ 선생님에게 알림 발송 - 이유: 알림은 시스템이 자동 발송. 채팅은 F-014

### 학부모

#### 할 수 있는 것
- ✅ 자녀의 수업 리마인더 받기 (옵션)
- ✅ 자녀의 출결 변동 알림 받기
- ✅ 수업 기록 업데이트 알림 받기
- ✅ 정산 알림 받기 (필수, 끌 수 없음)
- ✅ 알림 설정 변경 (F-007)
- ✅ 알림 히스토리 조회

#### 할 수 없는 것
- ❌ 학생의 알림 설정 변경 - 이유: 학생도 독립적인 사용자
- ❌ 선생님의 개인 알림 받기 (예: 선생님의 다른 그룹 활동) - 이유: 관련 없음
- ❌ 정산 알림 끄기 - 이유: 필수 알림

---

## 6. UI 요구사항

### 알림 센터 화면 (모든 사용자 공통)

**레이아웃**:
- 상단: "알림" 타이틀 + 설정 아이콘 (F-007로 이동)
- 중앙: 알림 리스트 (스크롤 가능)
- 하단: 탭 바 (홈/일정/알림/내정보)

**주요 컴포넌트**:
- **알림 카드**:
  - 왼쪽: 아이콘 (🔔📝💳❌📅)
  - 중앙: 알림 제목 + 내용 (2줄까지)
  - 오른쪽: 시간 (예: "5분 전", "어제", "11/1")
  - 배경색: 읽지 않음 (파란색 테두리), 읽음 (흰색)
  
- **필터 탭** (상단):
  - 전체 / 수업 / 정산 / 출결 / 기타
  - 탭 전환 시 해당 카테고리만 표시
  
- **읽음 표시**:
  - 읽지 않은 알림 개수 뱃지 (탭 바 알림 아이콘에 빨간 동그라미)

**인터랙션**:
- 알림 카드 탭 → 해당 기능 상세 화면으로 이동
  - 수업 리마인더 → 수업 상세 (F-003)
  - 정산 알림 → 정산 상세 (F-006)
  - 수업 기록 → 수업 기록 상세 (F-005)
- 알림 카드 좌로 스와이프 → "삭제" 버튼
- 전체 읽음 처리 버튼 (상단 오른쪽)

---

### 푸시 알림 (OS 알림)

**레이아웃**:
- 상단: 앱 아이콘 + "과외 관리" (앱 이름)
- 중앙: 알림 제목 (볼드)
- 하단: 알림 내용 (2줄까지, 나머지는 "...")
- 우측: 시간

**주요 컴포넌트**:
- **제목 형식**:
  - 수업 리마인더: "🔔 1시간 후 수업"
  - 정산 알림: "💳 수업료 결제 요청"
  - 수업 기록: "📝 수업 기록 업데이트"
  - 출결 변동: "❌ 출결 변동"
  - 보강 오픈: "📅 보강 시간 오픈"
  
- **내용 형식**:
  - 짧고 명확하게 (100자 이내)
  - 핵심 정보만: 누가, 무엇을, 언제
  - 예: "이학생 - 수학 (오후 3시)"

**인터랙션**:
- 푸시 알림 탭 → 앱 열림 + 해당 화면으로 이동
- 푸시 알림 스와이프 → 삭제 (앱 내 알림 센터에는 남음)

---

### 알림 설정 화면 (F-007에서 접근)

**레이아웃**:
- 상단: "알림 설정" 타이틀
- 중앙: 토글 목록
- 하단: 야간 알림 제한 섹션

**주요 컴포넌트**:
- **알림 종류별 토글**:
  - 수업 리마인더 (켤 수 있음)
  - 수업 기록 업데이트 (켤 수 있음)
  - 출결 변동 알림 (켤 수 있음)
  - 일정 변동 알림 (켤 수 있음)
  - 정산 알림 (끌 수 없음, 비활성화 상태)
  
- **야간 알림 제한**:
  - 토글: on/off
  - 시작 시간 선택 (기본: 오후 10시)
  - 종료 시간 선택 (기본: 오전 7시)

**인터랙션**:
- 토글 변경 시 즉시 저장
- 정산 알림 토글 탭 시 "이 알림은 끌 수 없습니다" 툴팁

---

## 7. 다른 기능과의 연결

### 의존하는 기능 (이것들이 먼저 있어야 함)

- **F-001: 회원가입 및 로그인** 
  - 이유: 알림을 받으려면 사용자 계정과 로그인 상태 필요. 푸시 토큰도 로그인 시 등록
  
- **F-002: 과외 그룹 생성 및 매칭** 
  - 이유: 알림은 그룹 단위로 발송됨. 그룹에 속하지 않으면 알림 받을 대상이 없음
  
- **F-003: 수업 일정 관리** 
  - 이유: 수업 리마인더는 등록된 일정을 기반으로 발송
  
- **F-004: 출결 관리** 
  - 이유: 출결 변동 알림은 출결 체크 이벤트에 의해 트리거됨
  
- **F-005: 수업 기록 및 진도 관리** 
  - 이유: 수업 기록 업데이트 알림은 수업 기록 저장 시 발송
  
- **F-006: 수업료 정산** 
  - 이유: 정산 알림은 청구서 발송, 결제 완료 등 정산 이벤트에 의해 트리거됨
  
- **F-007: 기본 프로필 및 설정** 
  - 이유: 사용자의 알림 설정(on/off, 야간 시간)을 F-007에서 관리. F-008은 이 설정을 읽어서 알림 발송 여부 결정

### 이 기능에 의존하는 기능 (이것 다음에 만들어질 것들)

- **F-009: 숙제 관리 (2단계)** 
  - 이유: 숙제 마감 리마인더, 숙제 제출 알림 등이 F-008의 알림 시스템을 사용
  
- **F-010: 학습 대시보드 (2단계)** 
  - 이유: 주간/월간 리포트 준비 완료 알림
  
- **F-014: 채팅 기능 (3단계)** 
  - 이유: 새 채팅 메시지 알림

### 함께 사용되는 기능 (밀접하게 연결됨)

- **F-003: 수업 일정 관리** 
  - 관계: 일정 등록 → 알림 발송 예약 자동 생성. 일정 취소 → 알림 취소
  
- **F-006: 수업료 정산** 
  - 관계: 청구서 발송 → 정산 알림. 결제 완료 → 완료 알림. 상호 연동 긴밀
  
- **F-007: 기본 프로필 및 설정** 
  - 관계: F-007의 설정을 F-008이 실시간으로 참조. 사용자가 알림을 끄면 즉시 반영

---

## 8. 향후 고려사항 (2단계 이후)

### 기능 확장

- **알림 요약 기능**:
  - 너무 많은 알림이 쌓이면 "새로운 알림 15개" 하나로 요약
  - 탭하면 전체 목록 표시
  - 왜 2단계인가: MVP에서는 알림 개수가 많지 않을 것으로 예상. 사용자 피드백 후 추가
  
- **알림 카테고리 맞춤 설정**:
  - 사용자가 원하는 카테고리만 받기 (예: 정산 알림만 받고 싶다)
  - 왜 2단계인가: 복잡도 증가. MVP에서는 주요 알림만 on/off
  
- **알림음 선택**:
  - 알림 종류별로 다른 소리 (예: 정산은 "띵동", 수업은 "딩")
  - 왜 2단계인가: 사소한 기능. 우선순위 낮음
  
- **알림 스누즈 (다시 알림)**:
  - 지금 확인 못하면 10분 후 다시 알림
  - 왜 2단계인가: 복잡도 증가. MVP에서는 알림 센터에 남아있으므로 충분

### 개선 아이디어

- **AI 기반 알림 최적화**:
  - 사용자의 알림 읽는 패턴 분석하여 최적 시간에 발송
  - 예: 박학부모님은 항상 저녁 8시에 알림을 확인하는 패턴 → 8시에 몰아서 발송
  - 왜 나중인가: AI 학습 데이터 필요. 사용자 확보 후
  
- **알림 우선순위 자동 조정**:
  - 사용자가 자주 무시하는 알림은 우선순위 낮춤
  - 왜 나중인가: 복잡한 로직. 사용자 피드백 후 필요성 판단
  
- **위치 기반 알림**:
  - 사용자가 수업 장소 근처에 도착하면 "곧 수업이 시작됩니다" 알림
  - 왜 나중인가: 위치 권한 필요, 배터리 소모 우려
  
- **그룹 알림 (여러 명에게 동시 발송)**:
  - 선생님이 "이번 주 휴강합니다" 메시지를 모든 학생에게 한 번에
  - 왜 나중인가: 현재는 그룹당 학생이 1-2명. 그룹 과외 기능(F-011)과 함께 추가

- **이메일 알림 연동**:
  - 중요한 알림(정산, 계약 등)은 이메일로도 발송
  - 왜 나중인가: 이메일 서비스 연동 필요. MVP는 푸시만
  
- **알림 통계**:
  - "이번 달 받은 알림: 45개", "가장 많이 받은 알림: 수업 리마인더"
  - 왜 나중인가: 부가 기능. 핵심 아님

---

## 9. 성공 지표

### 정량적 지표

| 지표명 | 측정 방법 | 목표값 | 측정 시점 |
|--------|---------|--------|----------|
| 알림 열람률 | (읽은 알림 수 / 발송된 알림 수) × 100 | 70% 이상 | 매주 |
| 알림 클릭률 | (클릭한 알림 수 / 발송된 알림 수) × 100 | 50% 이상 | 매주 |
| 수업 출석률 개선 | 알림 도입 전후 출석률 비교 | 10%p 이상 증가 | 분기별 |
| 정산 완료 속도 | 청구서 발송 후 결제 완료까지 평균 시간 | 24시간 이내 | 매월 |
| 알림 설정 유지율 | 알림을 끄지 않고 계속 켜놓는 사용자 비율 | 80% 이상 | 매월 |
| 야간 알림 보류율 | 야간 시간대에 보류된 알림 비율 | 30% 이상 (야간 활동 적음) | 매월 |

### 정성적 지표

- **사용자 피드백**: 
  - 기대: "알림 덕분에 수업을 깜빡하지 않아요", "더 이상 카톡으로 일정 공지 안 보내도 돼서 편해요", "자녀 수업 상황을 실시간으로 알 수 있어 안심됩니다"
  
- **문제 해결도**: 
  - 문제 2 (일정 조율 및 보강 수업 관리의 복잡성) 60% 이상 해결
  - 측정: "수업 리마인더로 인해 일정 관리가 얼마나 편해졌나요?" 설문 → "매우 편해짐" 응답 목표
  
- **카톡 사용 감소**: 
  - "과외 관련해서 카톡으로 공지하는 횟수가 줄었나요?" → "많이 줄었다" 응답 70% 이상

---

## 10. 알려진 제약사항 및 트레이드오프

### 기술적 제약

- **푸시 알림 의존도**: 
  - 외부 푸시 서비스(Firebase Cloud Messaging, Apple Push Notification Service)에 의존
  - 이유: 자체 푸시 서버 구축은 비용과 시간이 많이 듦
  - 트레이드오프: 해당 서비스가 다운되면 알림 발송 불가. 앱 내 알림 센터로 보완
  
- **OS별 알림 제한**: 
  - iOS와 Android는 알림 표시 방식이 다름 (예: iOS는 알림 그룹화 자동, Android는 수동 설정)
  - 이유: OS가 관리하는 영역
  - 트레이드오프: 완전히 통일된 UX 불가능. 각 OS의 권장사항 따름
  
- **네트워크 필수**: 
  - 알림 발송에 네트워크 연결 필수
  - 이유: 서버에서 푸시 서버로 알림 전송
  - 트레이드오프: 오프라인에서는 알림 발송 불가. 온라인 복구 시 자동 재시도

### 의도적 선택

- **즉시 알림 vs 배치 알림**: 
  - 선택: 대부분 즉시 알림 (야간 제외)
  - 포기: 알림을 모았다가 한꺼번에 보내는 배치 방식
  - 이유: 과외 관리는 실시간성이 중요. 수업 1시간 전이면 바로 알려줘야 함
  - 얻은 것: 빠른 정보 전달, 높은 사용자 만족도
  
- **푸시 알림 vs 이메일/SMS**: 
  - 선택: MVP에서는 푸시 알림만 지원
  - 포기: 이메일, SMS 알림
  - 이유: 푸시가 가장 빠르고 비용이 없음. 이메일/SMS는 추가 비용 발생
  - 얻은 것: 개발 속도, 비용 절감
  
- **개인화 vs 단순화**: 
  - 선택: MVP에서는 알림 종류별 on/off만 가능 (세밀한 맞춤 설정 없음)
  - 포기: "월요일에만 알림", "오전 수업만 알림" 같은 고급 필터링
  - 이유: 복잡도 증가, 사용자 혼란 가능성
  - 얻은 것: 직관적인 설정 화면, 빠른 개발
  
- **알림 보관 기간 90일**: 
  - 선택: 90일 후 자동 삭제
  - 포기: 영구 보관
  - 이유: 저장 공간 절약. 90일 전 알림은 사용자가 거의 확인 안 함
  - 얻은 것: 앱 용량 감소, 빠른 로딩

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| v1.0 | 2025-11-04 | 초안 작성 | Claude |
| v1.1 | 2025-11-11 | 알림 보관 기간 정책 상세화 (이슈 #6 해결) | AI Assistant |

---

## 첨부 자료

- [✓] 관련 리서치 자료: 온라인 리서치 결과물 2.pdf
- [✓] 문제 정의서: 01_문제_정의_및_목표_설정.md
- [✓] 연관 기능 명세서: F-003, F-004, F-005, F-006, F-007
- [ ] 와이어프레임 이미지 (디자인 단계에서 추가)
- [ ] 사용자 플로우 다이어그램 (개발 단계에서 추가)
