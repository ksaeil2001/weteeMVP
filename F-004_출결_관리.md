# F-004: 출결 관리

**버전**: v1.0  
**작성일**: 2025-10-31  
**최종 수정일**: 2025-10-31  
**우선순위**: 1단계 MVP  
**작성자**: AI Assistant

---

## 작성 전 체크리스트 ✅

```
[✓] 문제 정의서에서 관련 부분 다시 읽음
[✓] 경쟁 제품의 유사 기능 조사 완료
[✓] 이 기능과 연결된 다른 기능 목록 작성
[✓] 기술 용어 사용하지 않기로 다짐함
```

---

## 1. 이 기능은 왜 필요한가?

### 한 문장 요약
> 선생님이 매 수업마다 출결을 간편하게 기록하고, 학생과 학부모가 실시간으로 확인할 수 있게 하여 과외 이행의 투명성을 확보하고 정산 분쟁을 예방합니다.

### 문제 정의서와의 연결

**해결하는 문제**: 문제 1 - 파편화된 도구 사용으로 인한 데이터 관리의 혼란

문제 정의서에서 현직 과외 선생님은 "엑셀이나 달력에 의존해 출결을 체크하는 게 번거롭다"고 토로했습니다. 또한 "7명 이상의 학생을 가르치면서 매번 수입을 수기로 계산하다 오류가 발생해 세네 번씩 체크하는 번거로움"을 겪었다고 합니다.

출결 기록이 정산과 직접 연결되지 않으면, 선생님은 수업 횟수를 따로 세고, 결석한 수업을 제외하고, 보강 수업을 더해서 수동으로 계산해야 합니다. 이 과정에서 착오가 생기면 학부모와의 신뢰가 무너집니다.

### 왜 다른 도구로 안 되는가?

**현재 사용자들이 쓰는 방법**:
- 방법 1: 엑셀로 출결 관리 → 한계: 수동 입력 번거로움, 학부모가 실시간으로 볼 수 없음, 정산과 자동 연결 안 됨
- 방법 2: 구글 캘린더에 메모 → 한계: 출결 통계 기능 없음, 학생별 비교 어려움, 정산 데이터로 활용 불가
- 방법 3: 종이 수첩 → 한계: 분실 위험, 통계 확인 어려움, 학부모와 공유 불가

**경쟁 제품의 한계**:
- **수업기록노트**: 출결 체크 기능은 있지만 선생님 개인용. 학생/학부모가 실시간으로 볼 수 없음
- **과릿**: 수업 리포트 공유는 강점이나, 출결 데이터가 정산과 자동 연결 안 됨
- **일반 출결 앱**: 학원용으로 설계되어 1:1 과외에는 과도하게 복잡함

### 우리의 접근 방식

이 기능은 출결 기록을 일정(F-003)과 자동으로 연결하고, 정산(F-006)의 근거 데이터로 바로 활용합니다. 선생님이 수업 후 1-2번 탭으로 출결을 기록하면, 학생과 학부모는 즉시 확인할 수 있고, 월말 정산 시 수업 횟수가 자동으로 계산됩니다. 별도의 중복 작업 없이, 한 번 기록으로 모든 것이 해결됩니다.

---

## 2. 사용자 시나리오

### 시나리오 1: 선생님이 수업 후 출결 체크 (정상 출석)

**배경**: 
김선생님이 이학생과 2시간 수업을 마쳤습니다. 학생은 정시에 도착했고 수업을 잘 마쳤습니다. 이제 출결을 기록해야 합니다.

**전제 조건**:
- 김선생님은 이미 로그인되어 있다
- 오늘 일정에 "이학생 수학 과외 오후 3:00 - 5:00" 일정이 등록되어 있다

**단계**:

1. 김선생님이 앱 메인 화면의 "오늘의 수업" 섹션을 확인합니다
   - 화면에 "이학생 수학 과외 오후 3:00 - 5:00" 카드가 보입니다
   - 카드 오른쪽에 "출결 체크" 버튼이 있습니다

2. 김선생님이 "출결 체크" 버튼을 탭합니다
   - 출결 선택 화면이 나타납니다
   - 4개의 큰 버튼: "출석", "지각", "조퇴", "결석"
   - 각 버튼마다 이모지와 설명이 있습니다

3. 김선생님이 "출석" 버튼을 탭합니다
   - 확인 메시지가 나타납니다: "이학생의 출석을 기록할까요?"
   - "확인", "취소" 버튼

4. 김선생님이 "확인"을 탭합니다
   - 성공 메시지: "출석이 기록되었습니다"
   - 일정 카드에 초록색 체크마크가 표시됩니다
   - 자동으로 알림이 학생과 학부모에게 전송됩니다

**결과**:
- 이학생과 이학생 학부모는 푸시 알림을 받습니다: "이학생님의 오늘 수업이 출석 처리되었습니다"
- 출결 기록이 자동으로 저장되어 월말 정산 시 수업 횟수에 포함됩니다
- 김선생님의 달력에서 해당 일정에 "출석" 뱃지가 표시됩니다

---

### 시나리오 2: 선생님이 지각/조퇴 체크 (메모 추가)

**배경**: 
김선생님이 최학생과 수업을 했는데, 학생이 15분 늦게 도착했습니다. 지각 사유를 메모로 남기고 싶습니다.

**전제 조건**:
- 김선생님은 이미 로그인되어 있다
- 오늘 일정에 "최학생 영어 과외 오후 7:00 - 9:00" 일정이 있다

**단계**:

1. 김선생님이 "최학생 영어 과외" 카드의 "출결 체크" 버튼을 탭합니다
   - 출결 선택 화면이 나타납니다

2. 김선생님이 "지각" 버튼을 탭합니다
   - 지각 세부 화면이 나타납니다
   - 입력 필드: "지각 사유 (선택)" - 플레이스홀더: "예: 학교 일정으로 15분 늦음"
   - "확인", "취소" 버튼

3. 김선생님이 지각 사유를 입력합니다: "학교 동아리 활동으로 15분 지각"
   - 텍스트가 입력 필드에 표시됩니다

4. 김선생님이 "확인" 버튼을 탭합니다
   - 성공 메시지: "지각이 기록되었습니다"
   - 일정 카드에 노란색 시계 아이콘이 표시됩니다

**결과**:
- 최학생과 학부모는 알림을 받습니다: "최학생님의 오늘 수업이 지각 처리되었습니다"
- 학생과 학부모가 출결 상세를 보면 메모가 표시됩니다: "학교 동아리 활동으로 15분 지각"
- 지각도 "수업 완료"로 간주되어 정산 시 수업 횟수에 포함됩니다

---

### 시나리오 3: 선생님이 결석 처리 (보강 필요)

**배경**: 
김선생님이 박학생과 수업 약속이 있었는데, 학생이 갑작스런 사정으로 오지 못했습니다. 결석 처리하고 나중에 보강 일정을 잡아야 합니다.

**전제 조건**:
- 김선생님은 이미 로그인되어 있다
- 오늘 일정에 "박학생 수학 과외 오후 4:00 - 6:00" 일정이 있다

**단계**:

1. 김선생님이 "박학생 수학 과외" 카드의 "출결 체크" 버튼을 탭합니다
   - 출결 선택 화면이 나타납니다

2. 김선생님이 "결석" 버튼을 탭합니다
   - 결석 세부 화면이 나타납니다
   - 입력 필드: "결석 사유 (필수)" - 플레이스홀더: "예: 독감으로 결석"
   - 체크박스: "보강 필요" (기본 체크됨)
   - "확인", "취소" 버튼

3. 김선생님이 결석 사유를 입력합니다: "갑작스런 가족 사정"
   - "보강 필요" 체크박스가 체크된 상태를 확인합니다

4. 김선생님이 "확인" 버튼을 탭합니다
   - 확인 다이얼로그: "박학생의 수업을 결석 처리하고 보강이 필요하다고 표시할까요?"
   - "예", "아니오" 버튼

5. 김선생님이 "예"를 탭합니다
   - 성공 메시지: "결석이 기록되었습니다. 보강 일정을 잡아주세요"
   - 일정 카드에 빨간색 X 아이콘과 "보강 필요" 뱃지가 표시됩니다
   - 화면 하단에 "보강 일정 잡기" 버튼이 나타납니다

**결과**:
- 박학생과 학부모는 알림을 받습니다: "박학생님의 오늘 수업이 결석 처리되었습니다. 보강 일정이 필요합니다"
- 결석한 수업은 정산 시 수업 횟수에서 **제외**됩니다
- 김선생님의 "보강 필요한 수업" 목록에 추가됩니다
- 김선생님은 F-003의 보강 시간 오픈 기능을 통해 보강 일정을 잡을 수 있습니다

---

### 시나리오 4: 학생이 자신의 출결 기록 조회

**배경**: 
이학생이 이번 달 자신의 출석률이 궁금합니다. 지각한 날이 언제였는지 확인하고 싶습니다.

**전제 조건**:
- 이학생은 이미 로그인되어 있다
- 이학생은 김선생님의 그룹에 속해 있다
- 이번 달 수업이 8회 진행되었다

**단계**:

1. 이학생이 앱 메인 화면에서 "내 출결" 메뉴를 탭합니다
   - 출결 통계 화면이 나타납니다
   - 상단에 이번 달 요약 카드:
     - "이번 달 출석률: 87.5%"
     - "출석 7회 / 지각 1회 / 조퇴 0회 / 결석 0회"

2. 이학생이 화면을 아래로 스크롤합니다
   - 월별 출결 리스트가 보입니다
   - 각 수업마다 카드 형식:
     - "10월 25일 (금) 오후 3:00 - 5:00"
     - 상태: 초록색 "출석" 뱃지
     - "10월 20일 (일) 오후 3:00 - 5:00"
     - 상태: 노란색 "지각" 뱃지
     - "10월 15일 (화) 오후 3:00 - 5:00"
     - 상태: 초록색 "출석" 뱃지

3. 이학생이 "10월 20일 (일)" 지각 카드를 탭합니다
   - 출결 상세 화면이 나타납니다
   - 날짜 및 시간
   - 상태: 지각
   - 메모: "학교 동아리 활동으로 15분 지각"
   - 기록 시간: "2025년 10월 20일 오후 5:05"

**결과**:
- 이학생은 자신의 출결 기록을 명확히 확인할 수 있습니다
- 언제 지각했는지, 사유가 무엇이었는지 투명하게 볼 수 있습니다
- 월별, 분기별, 연도별 통계를 전환하여 볼 수 있습니다

---

### 시나리오 5: 학부모가 자녀의 출결 현황 확인 및 통계 조회

**배경**: 
박학부모님이 자녀의 이번 달 출석 현황이 궁금합니다. 결석이 몇 번 있었는지, 보강은 잘 진행되고 있는지 확인하고 싶습니다.

**전제 조건**:
- 박학부모는 이미 로그인되어 있다
- 박학생은 김선생님의 그룹에 속해 있다
- 이번 달 수업이 8회 예정이었고, 1회 결석, 1회 보강 완료

**단계**:

1. 박학부모가 앱 메인 화면에서 "박학생 출결" 메뉴를 탭합니다
   - 출결 통계 대시보드가 나타납니다
   - 상단에 요약 카드:
     - "이번 달 출석률: 87.5%"
     - "총 8회 중 7회 완료 (1회 보강 예정)"
     - 원 그래프: 출석 6회, 지각 0회, 조퇴 0회, 결석 1회, 보강 1회

2. 박학부모가 "상세 보기" 버튼을 탭합니다
   - 월별 출결 리스트가 나타납니다
   - 각 수업마다 카드:
     - "10월 28일 (월) - 보강" - 초록색 "출석" 뱃지
     - "10월 25일 (금) - 정규" - 초록색 "출석" 뱃지
     - "10월 23일 (수) - 정규" - 빨간색 "결석" 뱃지 + "보강 완료" 라벨

3. 박학부모가 "10월 23일 결석" 카드를 탭합니다
   - 출결 상세 화면이 나타납니다
   - 원래 일정: "10월 23일 (수) 오후 4:00 - 6:00"
   - 상태: 결석
   - 사유: "갑작스런 가족 사정"
   - 보강 상태: "10월 28일 (월) 보강 완료"

4. 박학부모가 화면 상단의 "통계" 탭을 탭합니다
   - 통계 차트가 나타납니다
   - 월별 출석률 그래프 (최근 6개월)
   - 출석/지각/결석 트렌드 라인 차트
   - "이번 달과 비교하여 지난 달보다 출석률이 5% 향상되었습니다" 메시지

**결과**:
- 박학부모는 자녀의 출결 현황을 실시간으로 투명하게 확인할 수 있습니다
- 결석이 발생했을 때 보강이 제대로 진행되었는지 추적 가능합니다
- 장기적인 출석 패턴을 파악하여 학습 태도를 모니터링할 수 있습니다

---

## 3. 이 기능에서 일어날 수 있는 문제들

### 출결 체크 시 예외 상황

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 이미 출결이 체크된 수업 | "이미 출결이 기록되어 있습니다. 수정하시겠어요?" | 현재 상태 표시 + "수정" 버튼 | 중복 체크 방지 |
| 결석 사유를 입력하지 않음 | "결석 사유를 입력해주세요" | 필수 입력 필드 강조 | 투명성 확보 |
| 수업 시작 전에 출결 체크 시도 | "수업이 시작되지 않았습니다. 수업 시작 후에 체크해주세요" | 버튼 비활성화 | 실수 방지 |
| 수업 종료 후 7일 경과 | "수업이 일주일 전에 종료되었습니다. 출결 체크가 필요하면 고객센터에 문의해주세요" | 체크 불가 안내 | 데이터 무결성 |
| 수업 일정이 없는 날 출결 체크 | (해당 없음) | 출결 체크 버튼 미표시 | - |
| 그룹에서 학생이 나간 후 출결 체크 | "이 학생은 더 이상 그룹에 없습니다" | 체크 불가 + 그룹 관리로 이동 | - |
| 네트워크 오류로 저장 실패 | "출결 기록에 실패했습니다. 네트워크 연결을 확인해주세요" | "다시 시도" 버튼, 입력 데이터 보존 | - |
| 동시에 여러 사용자가 같은 수업 출결 체크 (충돌) | "다른 사용자가 이미 출결을 기록했습니다. 최신 정보를 확인해주세요" | 최신 데이터로 새로고침 | 극히 드물지만 처리 |

### 출결 수정 시 예외 상황

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 수정 사유를 입력하지 않음 | "수정 사유를 입력해주세요" | 필수 입력 강조 | 감사 추적 |
| 정산이 완료된 수업 수정 시도 | "이미 정산이 완료되어 수정할 수 없습니다. 고객센터에 문의해주세요" | 수정 불가 안내 | 정산 무결성 보호 |
| 7일 이후 수정 시도 | "출결 기록은 7일 이내에만 수정 가능합니다. 특별한 사유가 있다면 고객센터에 문의해주세요" | 수정 불가 안내 | 무분별한 수정 방지 |
| 수정 권한이 없는 사용자 | "출결 기록은 선생님만 수정할 수 있습니다" | 수정 버튼 미표시 | 권한 제어 |
| 네트워크 오류로 수정 실패 | "출결 수정에 실패했습니다. 다시 시도해주세요" | "다시 시도" 버튼 | - |

### 출결 조회 시 예외 상황

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 기록된 출결이 없음 | "아직 출결 기록이 없습니다. 첫 수업을 진행해보세요!" | 빈 화면 + 안내 메시지 | - |
| 선택한 기간에 출결이 없음 | "이 기간에는 출결 기록이 없습니다" | 빈 리스트 표시 | - |
| 다른 그룹의 출결 조회 시도 | "권한이 없습니다. 자신이 속한 그룹의 출결만 확인할 수 있습니다" | 접근 차단 | 보안 |
| 학부모가 탈퇴한 학생 출결 조회 | "더 이상 이 학생의 정보를 볼 수 없습니다" | 접근 차단 | 개인정보 보호 |
| 네트워크 오류로 조회 실패 | "출결 기록을 불러올 수 없습니다. 네트워크 연결을 확인해주세요" | "다시 시도" 버튼 | - |

### 통계 조회 시 예외 상황

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 데이터가 부족해서 통계 의미 없음 | "출결 기록이 3회 미만입니다. 더 많은 수업을 진행한 후 통계를 확인해주세요" | 메시지 표시 + 현재 데이터는 보여줌 | - |
| 기간 선택이 너무 긴 경우 (3년 이상) | "최대 2년까지 통계를 확인할 수 있습니다" | 기간 조정 요청 | 성능 고려 |
| 잘못된 기간 선택 (종료일 < 시작일) | "종료일은 시작일 이후여야 합니다" | 날짜 재선택 요청 | - |
| 네트워크 오류로 통계 로딩 실패 | "통계를 불러올 수 없습니다. 다시 시도해주세요" | "다시 시도" 버튼 | - |

---

## 4. 비즈니스 규칙

### 출결 상태 정의

- **출석**: 수업 시작부터 종료까지 정상 참여
  - 정산 시 수업 횟수에 **포함**
  - 표시색: 초록색
  
- **지각**: 수업 시작 시간 이후 도착했지만 수업 참여
  - 정산 시 수업 횟수에 **포함**
  - 표시색: 노란색
  - 메모 입력 권장 (선택)
  
- **조퇴**: 수업 종료 시간 이전 퇴실
  - 정산 시 수업 횟수에 **포함**
  - 표시색: 주황색
  - 메모 입력 권장 (선택)
  
- **결석**: 수업 불참
  - 정산 시 수업 횟수에서 **제외**
  - 표시색: 빨간색
  - 사유 입력 필수
  - "보강 필요" 여부 선택 가능

### 출결 체크 시간 제약

- **최소 시간**: 수업 시작 시간부터 체크 가능
  - 예: 오후 3:00 수업 → 오후 3:00부터 체크 가능
  
- **권장 시간**: 수업 종료 시간 이후 즉시
  - 예: 오후 5:00 종료 → 오후 5:00 이후 바로 체크
  
- **최대 시간**: 수업 종료 후 7일 이내
  - 예: 10월 20일 수업 → 10월 27일까지 체크 가능
  - 7일 경과 시 고객센터 문의 필요

### 출결 수정 제약

- **수정 가능 기간**: 최초 기록 후 7일 이내
  - 예: 10월 20일 기록 → 10월 27일까지 수정 가능
  
- **수정 권한**: 선생님만 가능
  - 학생과 학부모는 조회만 가능
  
- **수정 이력**: 모든 수정 내역 보존
  - 누가, 언제, 무엇을, 왜 수정했는지 기록
  - 학생/학부모는 "수정됨" 뱃지만 표시, 이력은 비공개
  
- **정산 완료 후**: 수정 불가
  - 해당 월 정산이 완료되면 출결 기록 고정
  - 특별한 사유 시 고객센터 중재

### 알림 규칙

- **출결 기록 시**: 학생 + 학부모에게 즉시 푸시 알림
  - 출석: "OO학생님의 오늘 수업이 출석 처리되었습니다"
  - 지각/조퇴: "OO학생님의 오늘 수업이 [지각/조퇴] 처리되었습니다"
  - 결석: "OO학생님의 오늘 수업이 결석 처리되었습니다. 보강 일정이 필요합니다"
  
- **출결 수정 시**: 학생 + 학부모에게 푸시 알림
  - "OO학생님의 [날짜] 출결이 [출석→결석]으로 수정되었습니다"
  
- **결석 후 7일 경과**: 선생님에게 리마인더
  - "박학생님의 [날짜] 결석 수업 보강이 아직 완료되지 않았습니다"

### 통계 산출 규칙

- **출석률 계산**: (출석 + 지각 + 조퇴) ÷ (전체 수업 - 결석) × 100
  - 예: 전체 10회, 출석 7회, 지각 2회, 결석 1회
  - 출석률 = (7 + 2 + 0) ÷ (10 - 1) × 100 = 100%
  
- **통계 기간**: 월별, 분기별, 연도별, 전체
  - 기본 표시: 당월
  - 최대 조회 범위: 2년
  
- **보강 처리**: 결석 후 보강 완료 시
  - 원래 결석 기록은 유지
  - 보강 수업은 별도 출석 기록 생성
  - 통계에는 둘 다 표시

---

## 5. 사용자별 권한

### 과외 선생님

#### 할 수 있는 것
- ✅ 모든 학생의 출결 체크 (출석/지각/조퇴/결석)
- ✅ 출결 기록 수정 (7일 이내, 정산 전)
- ✅ 출결 메모 작성 및 수정
- ✅ 결석 시 "보강 필요" 표시
- ✅ 모든 학생의 출결 기록 및 통계 조회
- ✅ 출결 데이터 내보내기 (엑셀, PDF)

#### 할 수 없는 것
- ❌ 정산 완료 후 출결 수정 - 이유: 정산 무결성 보호
- ❌ 학생이 직접 체크한 "셀프 출석"을 무단 변경 (2단계 기능) - 이유: 학생 권리 보호
- ❌ 출결 기록 완전 삭제 - 이유: 감사 추적 필요

### 학생

#### 할 수 있는 것
- ✅ 자신의 출결 기록 조회 (전체 기간)
- ✅ 자신의 출결 통계 확인 (월별, 분기별, 연도별)
- ✅ 결석/지각 사유 확인
- ✅ 출결 데이터 내보내기 (자신의 것만)

#### 할 수 없는 것
- ❌ 출결 기록 작성 또는 수정 - 이유: 선생님만 기록 권한
- ❌ 다른 학생의 출결 조회 - 이유: 개인정보 보호
- ❌ 출결 메모 수정 - 이유: 선생님 기록 보호

### 학부모

#### 할 수 있는 것
- ✅ 자녀의 출결 기록 조회 (전체 기간)
- ✅ 자녀의 출결 통계 확인 (월별, 분기별, 연도별)
- ✅ 결석/지각 사유 확인
- ✅ 출결 데이터 내보내기 (자녀의 것만)
- ✅ 출결 관련 알림 수신

#### 할 수 없는 것
- ❌ 출결 기록 작성 또는 수정 - 이유: 선생님만 기록 권한
- ❌ 다른 학생의 출결 조회 - 이유: 개인정보 보호
- ❌ 출결 메모 수정 - 이유: 선생님 기록 보호

---

## 6. UI 요구사항

### 출결 체크 화면 (선생님)

**레이아웃**:
- 상단: "출결 체크" 타이틀 + 학생명 + 날짜/시간
- 중앙: 4개의 큰 버튼 (2×2 그리드)
- 하단: "취소" 버튼

**주요 컴포넌트**:
- **출결 버튼**: 
  - "출석" - 초록색, ✓ 아이콘
  - "지각" - 노란색, ⏰ 아이콘
  - "조퇴" - 주황색, ↗ 아이콘
  - "결석" - 빨간색, ✗ 아이콘
  - 각 버튼: 최소 터치 영역 48×48dp

- **메모 입력 (지각/조퇴/결석 선택 시)**:
  - 텍스트 필드, 최대 200자
  - 플레이스홀더: "사유를 입력해주세요 (선택)"
  - 결석 시 사유 입력 필수

**인터랙션**:
- 버튼 탭 시 해당 상태로 즉시 전환
- 지각/조퇴/결석 선택 시 메모 입력 화면으로 전환
- 출석 선택 시 바로 확인 다이얼로그
- 저장 후 성공 메시지 + 자동으로 이전 화면

### 출결 리스트 화면 (학생/학부모)

**레이아웃**:
- 상단: "출결 기록" 타이틀 + 기간 선택 드롭다운
- 중앙: 출결 통계 요약 카드 + 리스트
- 하단: 탭 바 (홈, 일정, 출결, 정산, 더보기)

**주요 컴포넌트**:
- **통계 요약 카드**:
  - 출석률 큰 숫자 (예: "87.5%")
  - 원 그래프 (출석/지각/조퇴/결석 비율)
  - 개수 표시 (출석 7회, 지각 1회, 조퇴 0회, 결석 0회)
  
- **출결 카드 (리스트)**:
  - 날짜: "10월 25일 (금)"
  - 시간: "오후 3:00 - 5:00"
  - 상태 뱃지: 색깔 + 텍스트 (출석/지각/조퇴/결석)
  - 메모 미리보기 (있는 경우)
  - 탭하면 상세 화면

**인터랙션**:
- 기간 드롭다운: 이번 달, 지난 달, 최근 3개월, 최근 6개월, 전체
- 출결 카드 탭 → 상세 화면 (날짜, 시간, 상태, 메모 전체)
- 리스트는 최신순 정렬

### 출결 통계 화면

**레이아웃**:
- 상단: "출결 통계" 타이틀 + 기간 선택 (월별/분기별/연도별)
- 중앙: 차트 영역 (스크롤 가능)
- 하단: "내보내기" 버튼 (PDF/엑셀)

**주요 컴포넌트**:
- **월별 출석률 라인 차트**:
  - X축: 월 (최근 6개월 또는 12개월)
  - Y축: 출석률 (0-100%)
  - 라인 색상: 파란색
  
- **출석/지각/조퇴/결석 바 차트**:
  - X축: 월
  - Y축: 횟수
  - 각 막대는 색깔로 구분
  
- **요약 통계 카드**:
  - 평균 출석률
  - 총 수업 횟수
  - 결석 횟수 및 보강 완료 여부

**인터랙션**:
- 차트 데이터 포인트 탭 → 툴팁으로 정확한 값 표시
- 내보내기 버튼 → 형식 선택 다이얼로그 → 파일 생성 → 공유 시트

### 출결 수정 화면 (선생님)

**레이아웃**:
- 상단: "출결 수정" 타이틀 + 경고 메시지
- 중앙: 현재 상태 표시 + 새로운 상태 선택 + 수정 사유 입력
- 하단: "수정하기" 버튼

**주요 컴포넌트**:
- **현재 상태 표시**:
  - 카드 형식
  - "현재: 출석 ✓"
  
- **새로운 상태 선택**:
  - 4개 라디오 버튼 (출석/지각/조퇴/결석)
  - 현재 상태는 기본 선택
  
- **수정 사유 입력**:
  - 텍스트 필드, 필수 입력
  - 플레이스홀더: "수정 사유를 입력해주세요 (예: 실수로 잘못 체크)"
  - 최대 200자

**인터랙션**:
- 수정 사유 미입력 시 "수정하기" 버튼 비활성화
- "수정하기" 탭 → 확인 다이얼로그 → 수정 완료 → 이전 화면
- 수정 완료 시 학생/학부모에게 알림 전송

---

## 7. 다른 기능과의 연결

### 의존하는 기능 (이것들이 먼저 있어야 함)

- **F-001: 회원가입 및 로그인** - 이유: 사용자 인증 및 권한 관리 필요
- **F-002: 과외 그룹 생성 및 매칭** - 이유: 출결은 그룹 내 학생에 대해 기록됨
- **F-003: 수업 일정 관리** - 이유: 출결은 특정 일정에 대한 기록. 일정이 있어야 출결 체크 가능

### 이 기능에 의존하는 기능 (이것 다음에 만들어질 것들)

- **F-006: 과외비 자동 정산** - 이유: 출결 기록(출석 횟수)을 기반으로 수업료 자동 계산
- **F-008: 필수 알림 시스템** - 이유: 출결 체크 시 알림 발송
- **F-010: 학습 대시보드 (2단계)** - 이유: 출석률을 포함한 종합 통계

### 함께 사용되는 기능 (밀접하게 연결됨)

- **F-003: 수업 일정 관리** - 관계: 일정 카드에서 바로 출결 체크. 일정과 출결은 1:1 매칭
- **F-006: 과외비 자동 정산** - 관계: 출결 기록이 정산 금액 계산의 근거 데이터
- **F-005: 수업 기록 및 진도 관리** - 관계: 출석한 수업에만 진도 기록 가능

---

## 8. 향후 고려사항 (2단계 이후)

### 기능 확장

- **학생 셀프 체크인 (2-Factor 인증)**:
  - 학생이 수업 시작 시 앱에서 "출석" 버튼 클릭
  - 선생님이 최종 승인
  - 왜 2단계인가: 신뢰 기반 과외에서는 선생님 체크만으로도 충분. 복잡도 증가
  
- **GPS 기반 출석 인증**:
  - 학생이 수업 장소에 도착하면 자동 체크인
  - 위치 위조 방지
  - 왜 2단계인가: 개인정보 민감성. MVP는 신뢰 기반
  
- **출결 수정 요청 (학생/학부모)**:
  - 학생이나 학부모가 출결 수정 요청
  - 선생님이 승인/거절
  - 왜 2단계인가: 선생님 권한으로 충분. 양방향 협의는 복잡도 증가
  
- **결석 패턴 알림**:
  - 결석이 3회 연속 발생 시 자동 경고 알림
  - 학습 습관 개선 코칭
  - 왜 2단계인가: AI 분석 필요. 충분한 데이터 확보 후

### 개선 아이디어

- **출결 데이터 시각화 고도화**:
  - 히트맵 (월별 출석 패턴)
  - 요일별 출석률 비교
  - 시간대별 출석 패턴
  - 왜 나중인가: 시각적 고도화는 핵심 기능 후
  
- **출결 예측 기능**:
  - 과거 패턴 기반 결석 가능성 예측
  - 시험 기간 출석률 하락 예상 알림
  - 왜 나중인가: AI 학습 데이터 필요
  
- **출결 기반 리워드 시스템**:
  - 연속 출석 배지
  - 출석률 목표 달성 보상
  - 왜 나중인가: F-013 리워드 시스템과 통합

---

## 9. 성공 지표

### 정량적 지표

| 지표명 | 측정 방법 | 목표값 | 측정 시점 |
|--------|---------|--------|----------|
| 출결 체크 완료율 | 전체 수업 중 출결 체크된 비율 | 95% 이상 | 매주 |
| 출결 체크 평균 소요 시간 | 체크 시작부터 완료까지 | 30초 이내 | 매주 |
| 출결 수정 빈도 | 전체 출결 중 수정된 비율 | 5% 미만 | 매월 |
| 출결 조회 빈도 (학생/학부모) | 사용자당 월간 평균 조회 횟수 | 10회 이상 | 매월 |
| 출결 데이터 내보내기 사용률 | 전체 선생님 중 내보내기 사용 비율 | 30% 이상 | 분기별 |
| 정산 시 출결 데이터 활용률 | 정산에서 자동 계산된 비율 | 90% 이상 | 매월 |

### 정성적 지표

- **사용자 피드백**: 
  - "출결 체크가 편리했나요?" 설문 (목표: 4.5/5.0 이상)
  - "출결 기록 덕분에 정산이 투명해졌나요?" (목표: "그렇다" 85% 이상)
  
- **문제 해결도**: 
  - 문제 정의서의 "파편화된 도구 사용" 해결 여부
  - 목표: "엑셀로 출결 체크하던 번거로움이 해소되었다" 80% 이상
  
- **신뢰도 향상**:
  - 학부모 만족도 조사: "출결 기록으로 선생님을 더 신뢰하게 되었나요?"
  - 목표: "그렇다" 75% 이상

---

## 10. 알려진 제약사항 및 트레이드오프

### 기술적 제약

**7일 경과 후 출결 체크 불가**:
- **제약사항**: 수업 후 7일이 지나면 출결 체크 불가
- **이유**: 기억의 정확성 저하. 7일 전 수업을 정확히 기억하기 어려움
- **실제 영향**: 대부분 선생님은 수업 직후 체크하므로 영향 최소
- **완화책**: 7일 경과 시 고객센터 중재를 통해 특별 처리 가능

**정산 완료 후 출결 수정 불가**:
- **제약사항**: 해당 월 정산이 완료되면 출결 기록 수정 불가
- **이유**: 정산 무결성 보호. 정산 후 출결 변경 시 금액 재계산 필요
- **트레이드오프**: 유연성 < 정산 신뢰성
- **완화책**: 정산 전 출결 확인 알림, 특별 사유 시 고객센터 중재

### 의도적 선택

**학생 셀프 체크인 미지원 (MVP)**:
- **포기한 기능**: 학생이 직접 출석 체크
- **이유**: 
  - 과외는 선생님과 학생 간 신뢰 기반
  - 선생님이 최종 확인해야 정확성 보장
  - 셀프 체크인은 복잡도 증가 (승인 프로세스 필요)
- **얻은 것**: 간단한 사용자 경험, 빠른 개발
- **향후 계획**: 2단계에서 "학생 체크인 + 선생님 승인" 구조 고려

**출결 메모 200자 제한**:
- **제약사항**: 메모는 최대 200자
- **이유**: 
  - 간결한 메모 유도 (장황한 설명 방지)
  - UI 가독성 유지
- **완화책**: 200자로 충분한 사유 설명 가능. 부족 시 F-005 수업 기록 활용

**출결 통계 2년 제한**:
- **제약사항**: 통계는 최대 2년까지만 조회 가능
- **이유**: 성능 고려. 너무 긴 기간의 통계는 로딩 시간 증가
- **실제 영향**: 대부분 사용자는 최근 6개월 통계만 확인
- **완화책**: 2년 이상 데이터는 엑셀 내보내기로 확인 가능

**선생님만 출결 수정 권한 (MVP)**:
- **제약사항**: 학생과 학부모는 출결 수정 요청 불가
- **이유**: 
  - 출결 기록의 권위 유지
  - MVP 단순화
- **대응**: 이의가 있으면 직접 선생님께 연락하여 요청
- **향후 계획**: 2단계에서 "수정 요청 → 승인/거절" 워크플로우

**출결 삭제 불가**:
- **제약사항**: 한 번 기록된 출결은 삭제 불가, 수정만 가능
- **이유**: 
  - 감사 추적 (Audit Trail) 필요
  - 분쟁 시 증거 자료
  - 데이터 무결성
- **대응**: 잘못 체크한 경우 수정으로 대응
- **향후 계획**: 삭제는 영구 미지원 (수정 이력으로 충분)

---

## 11. 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| v1.0 | 2025-10-31 | 초안 작성 | AI Assistant |

---

## 12. 첨부 자료

- [ ] 와이어프레임 이미지 (출결 체크, 출결 리스트, 통계 화면)
- [ ] 사용자 플로우 다이어그램 (출결 체크 → 조회 → 정산 연결)
- [ ] 관련 리서치 자료 (문제 정의서 참조)
- [ ] 경쟁 제품 분석 자료 (HANDOVER 문서 참조)

---

**다음 기능**: F-005 수업 기록 및 진도 관리
