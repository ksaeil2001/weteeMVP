# F-003: 수업 일정 관리

**버전**: v1.1  
**작성일**: 2025-10-31  
**최종 수정일**: 2025-11-11  
**우선순위**: 1단계 MVP  
**작성자**: AI Assistant  
**주요 변경사항 (v1.1)**: 반복 일정 규칙 4가지 예시 추가, DB 저장 형식 명시

---

## 작성 전 체크리스트 ✅

```
[✓] 문제 정의서에서 관련 부분 다시 읽음
[✓] 경쟁 제품의 유사 기능 조사 완료
[✓] 이 기능과 연결된 다른 기능 목록 작성
[✓] 기술 용어 사용하지 않기로 다짐함
```

---

## 1. 이 기능은 왜 필요한가?

### 한 문장 요약
> 선생님이 학생별 수업 일정을 체계적으로 등록하고, 보강 가능한 시간을 오픈하여 학생이 직접 예약할 수 있게 하며, 시험 기간 등 중요한 일정을 추적하여 수업 빼먹음과 일정 혼란을 원천 차단하는 기능

### 문제 정의서와의 연결

**해결하는 문제**: 문제 2 - 일정 조율 및 보강 수업 관리의 복잡성

문제 정의서에서:
> "카톡 혹은 전화로 일정 조율을 하는데, 구두적으로 진행하면 착오가 생기는 경우가 있어 카톡으로 주로 진행"

> "보강 수업의 경우 잊어먹지 않게 보강 하루 전, 당일 아침 다시 카톡으로 공지해야 하는 번거로움"

> "이번 추석처럼 연휴가 긴 경우 학생들이 여행으로 결석이 많아 일정 변동이 많아 꼼꼼히 정리해놓지 않으면 혼란스러움"

> "학생들마다 시험기간이 다르므로 학교별 시험기간과 그날 보는 과목을 기록하는데, 구글캘린더에 하는 게 불편함"

**가장 심각한 사례**:
> "잘못된 학생의 수업을 취소 처리하여 두 학생 수업을 빼먹은 경험"

**핵심 문제**:
- 한 선생님이 5-7명의 학생을 가르치면 주당 10-20개의 일정 관리
- 각 학생별로 다른 시험 기간, 학교 일정, 보강 요청이 추가되면 관리 복잡도 기하급수 증가
- 카카오톡으로 일정 조율하면 "그때 우리가 뭐라고 합의했지?" 찾기 어려움
- 매번 수동으로 리마인더 보내는 것이 번거로움

### 왜 다른 도구로 안 되는가?

**현재 사용자들이 쓰는 방법**:
- **구글 캘린더**: 
  - 한계: 학생별 상세 정보(시험 기간, 보는 과목 등) 체계적 기록 불가. 여러 학생 일정이 한 캘린더에 섞여 구분 어려움. 보강 일정 제안 기능 없음
  
- **카카오톡 대화**:
  - 한계: 비동기 소통으로 동기적 일정 조율. "이번 주 금요일 가능?" → 선생님 확인 전 다른 학생도 같은 시간 요청 → 둘 중 한 명 다시 조율. 대화 기록 스크롤해서 찾기 어려움
  
- **엑셀 스케줄표**:
  - 한계: 선생님만 볼 수 있음. 실시간 동기화 안 됨. 학생이 보강 신청하려면 따로 연락해야 함

**경쟁 제품의 한계**:
- **수업기록노트**: "앞으로 있을 수업 일정을 한눈에 볼 수 있게" 하지 못하고, "지난 수업 횟수와 납부 상황만 표시". 일정 관리 측면 보완 필요
- **과릿**: 일정 관리 기능은 있지만 보강 가능 시간대 오픈 및 학생 예약 시스템은 약함
- **김과외**: 플랫폼 내 일정 관리는 있으나 자체 매칭만 지원

### 우리의 접근 방식

1. **정규 수업 자동 반복**: "매주 월/수/금 오후 3시"처럼 한 번 등록하면 자동으로 반복 생성. 수동으로 매주 등록할 필요 없음

2. **보강 가능 시간 오픈**: 선생님이 "이번 주 토요일 오전, 일요일 오후 비어있어요"라고 시간대를 오픈하면, 학생들이 그중 원하는 시간을 선택해서 예약. 카톡으로 주고받을 필요 없음

3. **학생별 시험 일정 추적**: "이학생: 3월 15일~18일 중간고사 (수학, 영어, 과학)" 식으로 기록. 달력에서 시험 기간이 한눈에 보여 그 전주에 집중 수업 계획 가능

4. **자동 리마인더**: 수업 1일 전, 3시간 전 자동 알림. 선생님이 매번 "내일 수업이에요" 메시지 보낼 필요 없음

5. **일정 변경 추적**: 보강으로 바뀐 일정, 취소된 일정 모두 기록. "이번 달에 이 학생 수업 총 몇 회?" 자동 계산되어 정산 연동

---

## 2. 사용자 시나리오

### 시나리오 1: 선생님이 정규 수업 일정을 처음 등록하는 경우

**배경**: 김선생님은 "이학생 수학 과외" 그룹을 만들고 이학생을 초대했습니다. 이제 매주 월요일, 수요일 오후 3시에 2시간씩 수업하기로 약속했고, 이를 앱에 등록하려고 합니다.

**전제 조건**:
- 김선생님이 로그인되어 있음
- "이학생 수학 과외" 그룹에 이학생이 참여함 (F-002 완료)
- 아직 등록된 일정이 없음

**단계**:

1. 김선생님이 "이학생 수학 과외" 그룹 상세 화면으로 이동합니다.

2. **"일정" 탭**을 선택합니다.
   - 화면 중앙에 안내: "아직 일정이 없습니다. 첫 수업을 등록해보세요!"
   - 버튼: **"정규 수업 추가"** (파란색)
   - 버튼: **"보강 시간 오픈"** (회색)

3. **"정규 수업 추가"** 버튼을 누릅니다.

4. **"정규 수업 등록"** 화면이 나타납니다:
   
   **학생 선택** (자동 선택됨):
   - 이학생 (그룹에 학생이 한 명뿐이면 자동 선택)
   
   **수업 요일** (필수):
   - 체크박스: 월 / 화 / 수 / 목 / 금 / 토 / 일
   - 김선생님이 **월요일, 수요일** 체크
   
   **수업 시작 시간** (필수):
   - 시간 선택기: 오후 3:00
   
   **수업 시간** (필수):
   - 기본값: 120분 (그룹 생성 시 설정한 기본 수업 시간)
   - 조절 가능: 30분 단위 (60분, 90분, 120분, 150분...)
   
   **시작일** (필수):
   - 날짜 선택: 2025-11-04 (다음 월요일)
   - 안내: "이 날짜부터 반복 수업이 시작됩니다"
   
   **종료 조건** (필수):
   - 옵션 1: **종료일 지정** (라디오 버튼, 기본 선택)
     - 날짜 선택: 2026-02-28
   - 옵션 2: **횟수 지정**
     - 숫자 입력: 예) 40회
   - 옵션 3: **종료일 없음** (계속 반복)
   
   **수업 장소** (선택):
   - 텍스트 입력: 예) "학생 집"
   - 그룹 설정의 수업 방식이 "대면"이면 기본 표시
   
   **메모** (선택):
   - 텍스트 입력: 예) "수학 교재 2권 사용"

5. 모든 필드를 채우고 **"등록하기"** 버튼을 누릅니다.

6. 확인 화면이 나타납니다:
   - "정규 수업이 등록되었습니다"
   - 요약 정보:
     - 매주 월요일, 수요일 오후 3:00 - 5:00
     - 2025-11-04부터 2026-02-28까지
     - 예상 수업 횟수: 38회
   - 버튼: **"확인"**

7. **"확인"**을 누르면 **"일정" 탭**으로 돌아옵니다.
   - 달력 뷰가 표시됩니다
   - 11월 4일(월), 6일(수), 11일(월), 13일(수)... 모든 해당 요일에 수업이 자동 생성되어 표시됨
   - 각 일정 카드: "오후 3:00 - 5:00 이학생"

8. 동시에 이학생의 앱에도 알림이 옵니다:
   - "김선생님이 수업 일정을 등록했습니다"
   - 이학생이 자신의 **"일정" 탭**을 보면 같은 일정이 표시됨

**결과**:
- 매주 월/수 총 38회의 수업 일정이 자동 생성됨
- 각 일정마다 자동 리마인더가 설정됨
- 선생님과 학생 모두 앱에서 다음 수업 일정 확인 가능
- 이후 출결, 진도, 정산이 이 일정들과 자동 연결됨

---

### 시나리오 2: 학생이 결석하여 보강 수업을 신청하는 경우

**배경**: 이학생은 11월 6일(수) 수업이 있었는데 감기로 결석했습니다. 김선생님께 보강 수업을 신청하려고 합니다.

**전제 조건**:
- 11월 6일 수업이 "결석"으로 체크됨 (F-004와 연동)
- 김선생님이 보강 가능한 시간대를 미리 오픈해둠

**단계**:

1. 이학생이 앱의 **"일정" 탭**에 들어갑니다.

2. 11월 6일 수업 카드를 확인합니다:
   - 상태: "결석"
   - 버튼: **"보강 신청"** (빨간색 뱃지)

3. **"보강 신청"** 버튼을 누릅니다.

4. **"보강 가능한 시간"** 화면이 나타납니다:
   - 안내: "선생님이 오픈한 시간대에서 선택해주세요"
   - 리스트:
     - 11월 9일(토) 오전 10:00 - 12:00 [선택 가능]
     - 11월 10일(일) 오후 2:00 - 4:00 [선택 가능]
     - 11월 10일(일) 오후 5:00 - 7:00 [이미 예약됨 - 최학생]

5. 이학생이 **"11월 9일(토) 오전 10:00 - 12:00"**를 선택합니다.

6. 확인 화면이 나타납니다:
   - "보강 수업을 신청하시겠습니까?"
   - 원래 수업: 11월 6일(수) 오후 3:00
   - 보강 수업: 11월 9일(토) 오전 10:00
   - 버튼: **"신청하기"** / "취소"

7. **"신청하기"**를 누릅니다.

8. "보강 신청이 완료되었습니다" 메시지가 표시됩니다.

9. 동시에 김선생님의 앱에 알림이 옵니다:
   - "이학생이 11월 9일(토) 오전 10:00 보강 수업을 신청했습니다"
   - **"승인"** / **"거절"** 버튼

10. 김선생님이 **"승인"**을 누릅니다.

11. 11월 9일 토요일에 보강 수업이 확정되어 달력에 추가됩니다:
    - 원래 11월 6일 수업: "결석 (보강 완료)"로 표시
    - 11월 9일: "보강 수업" 뱃지와 함께 표시

12. 이학생에게 알림:
    - "보강 수업이 확정되었습니다. 11월 9일(토) 오전 10:00에 뵙겠습니다"

**결과**:
- 결석한 수업에 대한 보강이 체계적으로 관리됨
- 선생님이 보강 가능 시간을 오픈하면 학생이 직접 선택 가능
- 카톡으로 "언제 가능하세요?" 주고받을 필요 없음
- 원래 수업과 보강 수업이 명확히 구분되어 기록됨

---

### 시나리오 3: 선생님이 보강 가능한 시간대를 오픈하는 경우

**배경**: 김선생님은 이번 주말에 시간이 비어서 보강 수업을 할 수 있습니다. 학생들이 필요하면 예약할 수 있도록 시간대를 오픈하려고 합니다.

**전제 조건**:
- 김선생님이 로그인되어 있음
- 여러 그룹을 관리 중 (이학생, 최학생 등)

**단계**:

1. 김선생님이 메인 화면(선생님용 대시보드)의 **"일정" 섹션**으로 이동합니다.

2. 상단에 버튼: **"보강 시간 오픈"**을 누릅니다.

3. **"보강 가능 시간 오픈"** 화면이 나타납니다:
   
   **대상 그룹** (필수):
   - 드롭다운: "전체 그룹" / "이학생 수학 과외" / "최학생 영어 과외"
   - "전체 그룹" 선택 시 모든 학생이 예약 가능
   
   **날짜 및 시간 추가**:
   - 버튼: **"+ 시간대 추가"**

4. **"+ 시간대 추가"**를 누릅니다.

5. 첫 번째 시간대 입력:
   - 날짜: 11월 9일(토)
   - 시작 시간: 오전 10:00
   - 종료 시간: 오후 12:00
   - 장소 (선택): "학생 집"
   
6. 다시 **"+ 시간대 추가"**를 눌러 두 번째 시간대 입력:
   - 날짜: 11월 10일(일)
   - 시작 시간: 오후 2:00
   - 종료 시간: 오후 4:00

7. 세 번째 시간대 추가:
   - 날짜: 11월 10일(일)
   - 시작 시간: 오후 5:00
   - 종료 시간: 오후 7:00

8. 총 3개의 시간대를 추가한 후 **"오픈하기"** 버튼을 누릅니다.

9. 확인 화면:
   - "보강 가능 시간이 오픈되었습니다"
   - 학생들에게 알림이 전송됨
   - 버튼: **"확인"**

10. 대상 그룹의 모든 학생(이학생, 최학생)에게 알림이 옵니다:
    - "김선생님이 보강 가능한 시간을 오픈했습니다"
    - 앱에서 확인 가능

11. 김선생님의 **"일정" 탭**에서 오픈된 시간대가 표시됩니다:
    - 11월 9일(토) 오전 10:00 - 12:00 [오픈 중]
    - 11월 10일(일) 오후 2:00 - 4:00 [오픈 중]
    - 11월 10일(일) 오후 5:00 - 7:00 [오픈 중]
    - 학생이 예약하면 [예약됨 - 학생명]으로 변경

**결과**:
- 선생님이 보강 가능한 시간을 한 번에 여러 개 오픈 가능
- 학생들이 자신의 필요에 맞춰 시간 선택
- 먼저 예약한 학생이 우선권 (같은 시간에 여러 명 예약 불가)
- 카톡으로 일일이 "언제 가능해요?" 묻지 않아도 됨

---

### 시나리오 4: 선생님이 학생의 시험 일정을 등록하는 경우

**배경**: 이학생이 11월 20일부터 25일까지 기말고사가 있다고 김선생님께 알렸습니다. 김선생님은 이를 앱에 기록하여 시험 전 집중 수업을 계획하려고 합니다.

**전제 조건**:
- 김선생님이 로그인되어 있음
- "이학생 수학 과외" 그룹 관리 중

**단계**:

1. 김선생님이 "이학생 수학 과외" 그룹 상세 화면의 **"일정" 탭**으로 이동합니다.

2. 상단 메뉴에서 **"시험 일정"** 버튼을 누릅니다.

3. **"시험 일정 관리"** 화면이 나타납니다:
   - 현재 등록된 시험: (없음)
   - 버튼: **"+ 시험 추가"**

4. **"+ 시험 추가"**를 누릅니다.

5. **"시험 일정 등록"** 화면이 나타납니다:
   
   **시험명** (필수):
   - 텍스트 입력: "기말고사"
   
   **학교** (선택):
   - 텍스트 입력: "서울중학교" (학생 가입 시 입력한 학교 자동 표시)
   
   **시험 기간** (필수):
   - 시작일: 2025-11-20
   - 종료일: 2025-11-25
   
   **시험 과목** (선택):
   - 체크박스: 국어 / 영어 / 수학 / 과학 / 사회 / 기타
   - 김선생님이 **수학, 영어, 과학** 체크
   
   **메모** (선택):
   - 텍스트 입력: "이차함수, 확률 집중 대비"

6. **"등록하기"** 버튼을 누릅니다.

7. "시험 일정이 등록되었습니다" 메시지가 표시됩니다.

8. **"일정" 탭**의 달력으로 돌아가면:
   - 11월 20일~25일 구간에 **"📝 기말고사"** 뱃지가 표시됨
   - 해당 기간의 정규 수업들이 다른 색으로 강조됨 (시험 기간 수업임을 표시)

9. 김선생님이 시험 기간 일주일 전 수업들을 확인:
   - 11월 13일(수), 15일(금), 18일(월) 수업이 "시험 대비 수업"으로 자동 태깅됨
   - 진도 작성 시 "시험 대비" 템플릿 제안

10. 이학생의 앱에도 시험 일정이 표시됩니다:
    - 달력에서 11월 20-25일에 시험 뱃지
    - 홈 화면: "다가오는 시험: 기말고사 (D-15)"

**결과**:
- 학생별로 다른 시험 일정을 체계적으로 기록
- 시험 전 수업 자동 태깅으로 집중 대비 가능
- 구글 캘린더에 메모로 적을 필요 없이 구조화된 데이터로 관리
- 여러 학생의 서로 다른 시험 기간을 한눈에 비교 가능

---

### 시나리오 5: 선생님이 일정을 변경하는 경우 (급한 사정 발생)

**배경**: 김선생님은 11월 11일(월) 오후 3시에 이학생 수업이 있는데, 급한 가족 일로 그 시간에 수업을 할 수 없게 되었습니다. 11일 수업을 12일(화)로 옮기려고 합니다.

**전제 조건**:
- 11월 11일 수업이 등록되어 있음
- 아직 수업 시작 24시간 이전 (변경 가능한 시간)

**단계**:

1. 김선생님이 **"일정" 탭**에서 11월 11일 수업 카드를 길게 누릅니다.

2. 메뉴가 나타납니다:
   - **일정 변경**
   - **일정 취소**
   - **메모 추가**

3. **"일정 변경"**을 선택합니다.

4. **"일정 변경"** 화면이 나타납니다:
   - 원래 일정: 11월 11일(월) 오후 3:00 - 5:00
   - 
   - **새로운 날짜** (필수):
     - 날짜 선택: 11월 12일(화)
   
   - **새로운 시간** (필수):
     - 시간 선택: 오후 4:00 - 6:00
   
   - **변경 사유** (필수):
     - 텍스트 입력: "가족 일정으로 시간 변경"
   
   - 안내: "학생에게 변경 알림이 전송됩니다"

5. **"변경하기"** 버튼을 누릅니다.

6. 확인 다이얼로그:
   - "일정을 변경하시겠습니까?"
   - 변경 내용 요약
   - 버튼: **"확인"** / "취소"

7. **"확인"**을 누릅니다.

8. 일정이 변경되고:
   - 11월 11일: 수업 카드가 사라짐 (또는 "취소됨"으로 표시)
   - 11월 12일: 새로운 수업 카드 생성 "오후 4:00 - 6:00 이학생 (일정 변경)"

9. 이학생에게 즉시 푸시 알림:
   - "11월 11일 수업이 12일로 변경되었습니다"
   - 변경 사유: "가족 일정으로 시간 변경"
   - 버튼: **"확인"** / **"문의하기"**

10. 이학생이 **"확인"**을 누르면 변경 승인됨.

11. 이학생의 달력에도 11월 12일 오후 4시로 표시됨.

**결과**:
- 선생님이 필요 시 일정 변경 가능 (24시간 전까지)
- 학생에게 자동으로 알림 전송
- 변경 사유가 기록되어 나중에 분쟁 방지
- 정산 시 이 수업도 정상적으로 카운트됨

---

### 시나리오 6: 학생이 다가오는 수업 일정을 확인하는 경우

**배경**: 이학생은 이번 주에 수업이 언제 있는지 확인하고 싶습니다.

**전제 조건**:
- 이학생이 로그인되어 있음
- 정규 수업 일정이 등록되어 있음

**단계**:

1. 이학생이 앱의 홈 화면으로 들어갑니다.

2. 홈 화면 상단에 **"다가오는 수업"** 위젯이 표시됩니다:
   - "다음 수업: 오늘 오후 3:00 (김선생님)"
   - "이번 주 남은 수업: 2회"

3. 위젯을 탭하면 **"일정" 탭**으로 이동합니다.

4. 달력 뷰가 표시되고 현재 주가 기본 선택됨:
   - 11월 11일(월) 오후 3:00 - 5:00 김선생님 [오늘]
   - 11월 13일(수) 오후 3:00 - 5:00 김선생님

5. 하단에 **리스트 뷰 / 달력 뷰** 토글 버튼이 있습니다.

6. **리스트 뷰**를 선택하면:
   - 시간순으로 일정이 나열됨
   - 각 일정 카드:
     - 날짜 및 시간
     - 선생님 이름
     - 수업 시간 (2시간)
     - 상태 뱃지: "예정" / "진행 중" / "완료" / "결석"

7. 일정 카드를 탭하면 **"수업 상세"** 화면으로 이동:
   - 과외 그룹명: "이학생 수학 과외"
   - 선생님: 김선생님
   - 날짜 및 시간: 11월 11일(월) 오후 3:00 - 5:00
   - 수업 장소: "학생 집"
   - 메모: (있으면 표시)
   - 버튼: **"길 안내"** (수업 장소 주소 있을 시)

**결과**:
- 학생이 자신의 수업 일정을 한눈에 확인 가능
- 다음 수업이 언제인지 명확히 알 수 있음
- 카톡으로 "다음 수업 언제였죠?" 물어볼 필요 없음
- 달력 뷰와 리스트 뷰 전환으로 편의성 증대

---

## 3. 이 기능에서 일어날 수 있는 문제들

### 정규 수업 등록 시 예외 상황

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 필수 필드(요일, 시간) 비워둠 | "필수 항목을 모두 입력해주세요" | 비어 있는 필드 강조 | - |
| 수업 시간이 0분 | "수업 시간을 입력해주세요" | 입력 필드 경고 | - |
| 시작일이 과거 날짜 | "시작일은 오늘 이후로 선택해주세요" | 날짜 선택기 제한 | - |
| 종료일이 시작일보다 빠름 | "종료일은 시작일 이후여야 합니다" | 재선택 요구 | - |
| 종료 조건을 선택하지 않음 | "종료 조건을 선택해주세요" | 옵션 강조 | - |
| 횟수가 1000회 초과 | "횟수는 1000회 이하로 입력해주세요. 종료일 지정을 권장합니다" | 경고 표시 | 실수 방지 |
| 같은 시간에 다른 학생 수업이 겹침 | "이 시간에 이미 최학생 수업이 있습니다. 시간을 변경하시겠어요?" | 시간 조정 제안 | 일정 충돌 감지 |
| 선택한 요일이 하나도 없음 | "최소 한 개의 요일을 선택해주세요" | 요일 선택 강조 | - |
| 그룹에 학생이 없음 | "먼저 학생을 초대해주세요" | F-002 초대 화면으로 이동 | - |
| 네트워크 오류로 등록 실패 | "네트워크 연결을 확인해주세요" | "다시 시도" 버튼, 입력 데이터 보존 | - |

### 보강 수업 관련 예외 상황

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 오픈된 보강 시간이 없음 (학생) | "현재 예약 가능한 보강 시간이 없습니다. 선생님께 문의해주세요" | 빈 화면에 안내 표시 | - |
| 학생이 이미 예약된 시간 선택 | "이 시간은 이미 다른 학생이 예약했습니다. 다른 시간을 선택해주세요" | 해당 시간 비활성화 | 실시간 동기화 |
| 보강 신청 후 선생님이 거절 | "선생님이 보강 신청을 거절했습니다. 사유: [사유]" | 다른 시간 재선택 가능 | 거절 사유 표시 |
| 보강 시간이 과거 날짜 | "과거 날짜는 선택할 수 없습니다" | 날짜 필터링 | - |
| 보강 가능 시간 오픈 시 시작 > 종료 | "종료 시간이 시작 시간보다 빠릅니다" | 재입력 요구 | - |
| 같은 시간에 정규 수업이 있음 (선생님) | "이 시간에 이미 정규 수업이 있습니다. 다른 시간을 선택하시겠어요?" | 시간 충돌 경고 | - |
| 학생이 보강 신청 후 24시간 이내 취소 시도 | "보강 신청은 24시간 전까지만 취소할 수 있습니다. 선생님께 직접 문의해주세요" | 취소 버튼 비활성화 | 급작스런 취소 방지 |

### 일정 변경/취소 시 예외 상황

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 수업 시작 24시간 이내 변경 시도 | "수업 24시간 전까지만 변경할 수 있습니다. 학생과 직접 협의해주세요" | 변경 버튼 비활성화 | 학생 보호 |
| 변경 사유를 입력하지 않음 | "변경 사유를 입력해주세요" | 필수 입력 강조 | 투명성 확보 |
| 이미 완료된 수업 변경 시도 | "완료된 수업은 변경할 수 없습니다" | 변경 불가 안내 | 데이터 무결성 |
| 새 일정이 다른 수업과 겹침 | "변경하려는 시간에 이미 다른 수업이 있습니다. 다른 시간을 선택해주세요" | 시간 충돌 감지 | - |
| 학생이 변경 거부 (2단계 기능) | "학생이 일정 변경을 거부했습니다. 직접 협의해주세요" | 원래 일정 유지 | 양방향 합의 |
| 수업 취소 시 사유 미입력 | "취소 사유를 입력해주세요" | 필수 입력 | - |
| 네트워크 오류 | "네트워크 연결을 확인해주세요" | "다시 시도" 버튼 | - |

### 시험 일정 관련 예외 상황

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 시험 기간이 과거 날짜 | "시험 기간은 현재 이후로 입력해주세요" | 날짜 제한 | - |
| 시험 종료일이 시작일보다 빠름 | "시험 종료일을 확인해주세요" | 재입력 요구 | - |
| 시험명을 입력하지 않음 | "시험명을 입력해주세요" | 필수 입력 강조 | - |
| 같은 기간에 이미 다른 시험이 등록됨 | "이 기간에 이미 [중간고사]가 등록되어 있습니다. 계속 추가하시겠어요?" | 확인 다이얼로그 | 중복 등록 경고 |
| 시험 기간이 3개월 이상 | "시험 기간이 너무 깁니다. 종료일을 확인해주세요" | 경고 표시 | 실수 방지 |

### 일정 조회 시 예외 상황

| 문제 상황 | 사용자에게 보여줄 메시지 | 시스템이 할 일 | 비고 |
|----------|----------------------|--------------|------|
| 등록된 일정이 전혀 없음 | "아직 일정이 없습니다. 첫 수업을 등록해보세요!" | 안내 + "정규 수업 추가" 버튼 | - |
| 선택한 기간에 일정이 없음 | "이 기간에는 일정이 없습니다" | 빈 달력 표시 | - |
| 과거 일정 조회 시 너무 오래된 데이터 | (정상 표시) | 최대 1년 전까지 조회 가능 | 성능 고려 |
| 네트워크 오류로 일정 불러오기 실패 | "일정을 불러올 수 없습니다. 네트워크 연결을 확인해주세요" | "다시 시도" 버튼 | - |

---

## 4. 비즈니스 규칙

### 정규 수업 일정 규칙

- **수업 요일**:
  - 최소 선택: 1개 이상
  - 최대 선택: 7개 (매일 가능)
  
- **수업 시간**:
  - 최소: 30분
  - 최대: 300분 (5시간)
  - 단위: 30분 (30분, 60분, 90분, 120분...)
  
- **시작일**: 오늘 또는 미래 날짜
  
- **종료 조건**:
  - 옵션 1: 종료일 지정 (최대 2년 후까지)
  - 옵션 2: 횟수 지정 (1~1000회)
  - 옵션 3: 종료일 없음 (무한 반복, 경고 표시)
  
- **반복 생성 제한**: 한 번 등록 시 최대 200개의 개별 수업 자동 생성

### 반복 일정 규칙 상세 예시

#### 예시 1: 매주 월/수/금 반복

**설정**:
- 주기: 매주 (1주마다)
- 요일: 월요일, 수요일, 금요일
- 시작일: 2025년 1월 6일 (월)
- 종료 조건: 12회 수업 후 종료

**생성되는 수업**:
- 2025-01-06 (월) - 1회
- 2025-01-08 (수) - 2회
- 2025-01-10 (금) - 3회
- 2025-01-13 (월) - 4회
- 2025-01-15 (수) - 5회
- ... 총 12회까지

**DB 저장 형식**:
```json
{
  "frequency": "weekly",
  "interval": 1,
  "days_of_week": [1, 3, 5],
  "start_date": "2025-01-06",
  "end_type": "count",
  "end_count": 12
}
```

#### 예시 2: 격주 화요일 반복

**설정**:
- 주기: 격주 (2주마다)
- 요일: 화요일
- 시작일: 2025년 1월 7일 (화)
- 종료 조건: 2025년 12월 31일까지

**생성되는 수업**:
- 2025-01-07 (화)
- 2025-01-21 (화)
- 2025-02-04 (화)
- 2025-02-18 (화)
- ... 2025-12-30 (화)까지

**DB 저장 형식**:
```json
{
  "frequency": "weekly",
  "interval": 2,
  "days_of_week": [2],
  "start_date": "2025-01-07",
  "end_type": "date",
  "end_date": "2025-12-31"
}
```

#### 예시 3: 매일 반복 (집중 특강)

**설정**:
- 주기: 매일
- 요일: 월~일 (전체)
- 시작일: 2025년 7월 1일
- 종료 조건: 30회 수업 후 종료

**생성되는 수업**:
- 2025-07-01 ~ 2025-07-30 (30일간 매일)

**DB 저장 형식**:
```json
{
  "frequency": "daily",
  "interval": 1,
  "days_of_week": [1, 2, 3, 4, 5, 6, 7],
  "start_date": "2025-07-01",
  "end_type": "count",
  "end_count": 30
}
```

#### 예시 4: 종료일 없는 무한 반복

**설정**:
- 주기: 매주
- 요일: 토요일
- 시작일: 2025년 1월 4일 (토)
- 종료 조건: 없음 (무한 반복)

**DB 저장 형식**:
```json
{
  "frequency": "weekly",
  "interval": 1,
  "days_of_week": [6],
  "start_date": "2025-01-04",
  "end_type": "never"
}
```

**주의사항**:
- 무한 반복 일정은 최초 등록 시 향후 3개월(최대 200개)까지만 자동 생성
- 매월 1일에 추가 3개월치 일정 자동 생성
- 사용자에게 "종료일 설정을 권장합니다" 경고 표시

#### 반복 규칙 변경 시 처리

**규칙 변경 적용 방식**:
1. **미래 일정만 변경**: 선택한 날짜 이후의 모든 반복 일정 변경
2. **이 일정만 변경**: 선택한 날짜의 일정만 변경 (반복에서 분리)
3. **모든 일정 변경**: 과거 포함 전체 변경 (완료/출석 기록은 유지)

**예시**:
- 원래 규칙: 매주 월/수/금 18:00-19:00
- 5월 10일부터 시간을 19:00-20:00로 변경
- 5월 10일 이전 수업: 18:00-19:00 유지
- 5월 10일 이후 수업: 19:00-20:00로 자동 변경

### 보강 수업 규칙

- **보강 가능 시간 오픈**:
  - 최소 시간: 30분
  - 최대 시간: 300분
  - 오픈 가능 기간: 오늘부터 4주 후까지
  - 선생님당 동시 오픈 가능: 최대 20개 시간대
  
- **보강 신청**:
  - 신청 가능 시기: 수업 24시간 전까지
  - 취소 가능 시기: 수업 24시간 전까지
  - 한 시간대에 한 명만 예약 가능 (선착순)
  
- **보강 승인**:
  - 선생님 승인 필수
  - 거절 시 사유 입력 필수
  - 승인/거절 시 학생에게 자동 알림

### 일정 변경/취소 규칙

- **변경 가능 시기**: 수업 시작 24시간 전까지
- **변경 사유**: 필수 입력 (5자 이상)
- **취소 사유**: 필수 입력 (5자 이상)
- **변경/취소 이력**: 모두 기록되어 나중에 조회 가능
- **완료된 수업**: 변경/취소 불가

### 시험 일정 규칙

- **시험 기간**:
  - 최소: 1일
  - 최대: 30일 (한 달)
  - 미래 날짜만 등록 가능 (오늘 포함)
  
- **시험명**: 필수, 2자 이상 30자 이하
- **학생당 동시 등록 가능**: 최대 10개 시험
- **중복 기간 경고**: 같은 기간에 다른 시험 있으면 경고 (차단은 안 함)

### 일정 충돌 규칙

- **같은 시간, 같은 선생님**: 불가능 (에러 표시)
- **같은 시간, 다른 학생**: 경고만 표시, 등록은 가능 (그룹 수업 가능성)
- **정규 수업과 보강 수업 겹침**: 불가능 (에러 표시)
- **정규 수업과 오픈 시간 겹침**: 경고 표시, 오픈은 가능 (정규 수업 우선)

### 알림 규칙

- **수업 리마인더**:
  - 1일 전 오후 8시
  - 3시간 전
  - 사용자 설정에서 끄기 가능
  
- **일정 변경 알림**: 즉시 발송
- **보강 신청/승인 알림**: 즉시 발송
- **시험 임박 알림**: 3일 전, 1일 전

---

## 5. 사용자별 권한

### 선생님

#### 할 수 있는 것
- ✅ 정규 수업 일정 등록 (반복 일정 포함)
- ✅ 정규 수업 일정 수정/삭제
- ✅ 보강 가능 시간대 오픈
- ✅ 보강 신청 승인/거절
- ✅ 일정 변경/취소 (24시간 전까지)
- ✅ 학생별 시험 일정 등록
- ✅ 모든 학생의 일정 조회
- ✅ 달력에서 전체 일정 한눈에 보기

#### 할 수 없는 것
- ❌ 과거 일정 수정/삭제 - 이유: 데이터 무결성, 정산 연동
- ❌ 완료된 수업 변경 - 이유: 출결 기록 보호
- ❌ 학생이 등록한 개인 일정 보기 - 이유: 개인정보 보호

### 학생

#### 할 수 있는 것
- ✅ 자신의 수업 일정 조회
- ✅ 보강 가능 시간대 확인
- ✅ 보강 수업 신청
- ✅ 보강 신청 취소 (24시간 전까지)
- ✅ 자신의 시험 일정 조회
- ✅ 다가오는 수업 알림 받기

#### 할 수 없는 것
- ❌ 정규 수업 일정 등록/수정 - 이유: 선생님만 권한
- ❌ 보강 가능 시간 오픈 - 이유: 선생님만 권한
- ❌ 일정 직접 변경 - 이유: 선생님과 협의 필요
- ❌ 일정 취소 - 이유: 선생님과 협의 필요
- ❌ 다른 학생의 일정 보기 - 이유: 개인정보 보호

### 학부모

#### 할 수 있는 것
- ✅ 자녀의 수업 일정 조회 (읽기 전용)
- ✅ 자녀의 시험 일정 조회
- ✅ 다가오는 수업 알림 받기
- ✅ 일정 변경 시 알림 받기

#### 할 수 없는 것
- ❌ 일정 등록/수정/삭제 - 이유: 선생님 또는 학생만 가능
- ❌ 보강 수업 신청 - 이유: 학생 본인만 가능
- ❌ 일정 변경 요청 - 이유: 2단계 기능 (MVP 미포함)

---

## 6. UI 요구사항

### 정규 수업 등록 화면

**레이아웃**:
- 상단: "정규 수업 등록" 타이틀
- 중앙: 입력 폼 (스크롤 가능)
- 하단: "등록하기" 버튼 (고정)

**주요 컴포넌트**:
- **학생 선택**: 드롭다운 또는 자동 선택
- **요일 체크박스**: 7개, 여러 개 선택 가능
- **시간 선택기**: 시작 시간 (시/분)
- **수업 시간**: 숫자 입력 + 단위 선택 (분)
- **날짜 선택**: 시작일, 종료일 (캘린더 피커)
- **종료 조건**: 라디오 버튼 3개 (종료일/횟수/없음)
- **장소/메모**: 텍스트 입력 (선택)

**인터랙션**:
- 필수 필드 비어있으면 "등록하기" 버튼 비활성화
- 시간 선택 시 30분 단위로 스냅
- 종료 조건 선택에 따라 입력 필드 변경
- 확인 화면에서 예상 수업 횟수 계산하여 표시

### 달력 화면 (선생님/학생 공통)

**레이아웃**:
- 상단: 년/월 표시 + 이전/다음 버튼
- 중앙: 달력 그리드 (월간 뷰 기본)
- 하단: 탭 바 또는 뷰 전환 버튼

**주요 컴포넌트**:
- **달력 셀**:
  - 날짜 숫자
  - 수업 개수 뱃지 (예: "2회")
  - 시험 기간 표시 (배경색 변경)
  
- **일정 카드** (리스트 뷰):
  - 시간: "오후 3:00 - 5:00"
  - 학생명 (선생님 뷰) 또는 선생님명 (학생 뷰)
  - 상태 뱃지: "예정" / "완료" / "결석" / "보강"
  - 시험 뱃지: "📝 기말고사"
  
- **뷰 전환**: "월간" / "주간" / "리스트" 토글

**인터랙션**:
- 달력 셀 탭 → 해당 날짜의 일정 상세 표시
- 일정 카드 탭 → 수업 상세 화면
- 일정 카드 길게 누르기 → 메뉴 (변경/취소/메모)
- 좌우 스와이프로 월 이동

### 보강 시간 오픈 화면 (선생님)

**레이아웃**:
- 상단: "보강 가능 시간 오픈" 타이틀
- 중앙: 시간대 리스트 + 추가 버튼
- 하단: "오픈하기" 버튼

**주요 컴포넌트**:
- **대상 그룹 선택**: 드롭다운
- **시간대 카드**:
  - 날짜 (캘린더 피커)
  - 시작 시간 - 종료 시간
  - 삭제 버튼
- **"+ 시간대 추가"** 버튼

**인터랙션**:
- 시간대 추가 시 폼 확장
- 시간대 삭제 시 즉시 제거
- 최소 1개 이상 추가해야 "오픈하기" 활성화

### 보강 신청 화면 (학생)

**레이아웃**:
- 상단: "보강 가능한 시간" 타이틀
- 중앙: 시간대 리스트 (카드 형식)
- 하단: 필터/정렬 옵션

**주요 컴포넌트**:
- **시간대 카드**:
  - 날짜 및 시간: "11월 9일(토) 오전 10:00 - 12:00"
  - 상태: [선택 가능] / [이미 예약됨 - 학생명]
  - 버튼: "선택"
  
- **필터**:
  - 날짜 범위
  - 시간대 (오전/오후/저녁)

**인터랙션**:
- 선택 가능한 시간대만 탭 가능
- 선택 시 확인 다이얼로그
- 신청 후 상태 업데이트 (실시간)

### 시험 일정 관리 화면

**레이아웃**:
- 상단: "시험 일정 관리" 타이틀
- 중앙: 시험 리스트
- 하단: "+ 시험 추가" 버튼

**주요 컴포넌트**:
- **시험 카드**:
  - 시험명: "기말고사"
  - 기간: "11월 20일 - 25일"
  - 과목: 수학, 영어, 과학 (뱃지)
  - D-day 표시: "D-15"
  - 수정/삭제 버튼
  
**인터랙션**:
- 시험 카드 탭 → 상세 정보 + 수정 가능
- 삭제 시 확인 다이얼로그

---

## 7. 다른 기능과의 연결

### 의존하는 기능 (이것들이 먼저 있어야 함)

- **F-001: 회원가입 및 로그인** - 이유: 사용자 인증 필요
- **F-002: 과외 그룹 생성 및 매칭** - 이유: 일정은 그룹에 속함. 학생이 그룹에 참여해야 일정 등록 가능

### 이 기능에 의존하는 기능 (이것 다음에 만들어질 것들)

- **F-004: 출결 관리** - 이유: 출석 체크는 일정이 있어야 가능
- **F-005: 수업 기록 및 진도 관리** - 이유: 진도 기록은 특정 수업 일정에 연결됨
- **F-006: 과외비 자동 정산** - 이유: 실제 진행된 수업 횟수로 정산 금액 계산
- **F-008: 필수 알림 시스템** - 이유: 수업 리마인더, 일정 변경 알림

### 함께 사용되는 기능 (밀접하게 연결됨)

- **F-002: 과외 그룹 생성 및 매칭** - 관계: 그룹 정보(수업료, 기본 수업 시간)를 일정 등록 시 사용
- **F-004: 출결 관리** - 관계: 일정에서 "결석" 처리되면 보강 신청 가능. 일정과 출결은 1:1 매칭
- **F-006: 과외비 자동 정산** - 관계: 완료된 일정 개수로 수업료 자동 계산

---

## 8. 향후 고려사항 (2단계 이후)

### 기능 확장

- **학생의 일정 변경 요청 기능**:
  - 학생이 일정 변경을 요청하면 선생님이 승인/거절
  - 왜 2단계인가: MVP에서는 선생님 중심 관리. 양방향 협의는 복잡도 증가
  
- **그룹 수업 지원**:
  - 한 일정에 여러 학생 추가 (예: 그룹 과외)
  - 왜 2단계인가: 대부분 1:1 과외. 그룹 과외는 소수
  
- **주기적 휴일 자동 건너뛰기**:
  - 공휴일에는 자동으로 일정 생성 안 함
  - 왜 2단계인가: 공휴일 API 연동 필요. MVP는 수동 관리
  
- **캘린더 동기화 (구글/애플)**:
  - 앱 일정을 구글 캘린더나 애플 캘린더에 자동 동기화
  - 왜 2단계인가: 복잡한 외부 연동. MVP는 앱 내 관리에 집중

### 개선 아이디어

- **AI 기반 최적 일정 제안**:
  - 학생의 시험 일정, 과거 수업 패턴 분석하여 최적의 보강 시간 제안
  - 왜 나중인가: AI 학습 데이터 필요. 충분한 사용자 확보 후
  
- **지도 연동**:
  - 수업 장소 주소 입력 시 지도에 표시, 길 안내 제공
  - 왜 나중인가: 추가 개발 시간. MVP는 텍스트로 충분
  
- **일정 템플릿**:
  - 자주 사용하는 일정 설정을 템플릿으로 저장 (예: "고3 수학 표준 일정")
  - 왜 나중인가: 사용 패턴 파악 후 유용한 템플릿 발굴

---

## 9. 성공 지표

### 정량적 지표

| 지표명 | 측정 방법 | 목표값 | 측정 시점 |
|--------|---------|--------|----------|
| 정규 수업 등록 완료율 | 등록 시작 대비 완료 비율 | 85% 이상 | 매주 |
| 평균 등록 소요 시간 | 시작부터 완료까지 | 3분 이내 | 매주 |
| 보강 시간 예약률 | 오픈된 시간 중 실제 예약된 비율 | 60% 이상 | 매월 |
| 일정 변경 빈도 | 전체 일정 대비 변경된 비율 | 10% 미만 | 매월 |
| 일정 빼먹음 사고 | 사용자 보고 기준 | 0건 | 매월 |
| 달력 조회 빈도 | 사용자당 주간 평균 조회 횟수 | 5회 이상 | 매주 |

### 정성적 지표

- **사용자 피드백**: 
  - "일정 관리가 편리해졌나요?" 설문 (목표: 4.5/5.0 이상)
  - "수업을 빼먹은 적이 있나요?" (목표: "없다" 95% 이상)
  
- **문제 해결도**: 
  - 문제 정의서의 "일정 조율 복잡성" 해결 여부
  - 목표: "이제 일정 관리가 체계적이다" 80% 이상

---

## 10. 알려진 제약사항 및 트레이드오프

### 기술적 제약

**정규 수업 자동 생성 개수 제한 (200개)**:
- **제약사항**: 한 번 등록 시 최대 200개의 개별 일정 생성
- **이유**: 성능 고려. 너무 많은 일정을 한 번에 생성하면 시간 소요
- **실제 영향**: 주 2회 수업 × 2년 = 약 200회. 대부분 케이스 커버
- **완화책**: 2년 이상 과외는 나중에 추가 등록

**일정 변경 24시간 제한**:
- **제약사항**: 수업 24시간 전까지만 변경 가능
- **이유**: 학생 보호. 급작스런 변경으로 인한 피해 방지
- **트레이드오프**: 선생님 유연성 < 학생 안정성
- **완화책**: 예외 상황은 직접 연락으로 해결

### 의도적 선택

**과거 일정 수정 불가**:
- **포기한 기능**: 완료된 수업 일정 수정
- **이유**: 
  - 출결 기록, 진도 기록, 정산이 연결되어 있음
  - 과거 수정 허용 시 데이터 무결성 문제
- **얻은 것**: 정산 분쟁 방지, 기록 신뢰성
- **향후 계획**: 관리자 권한으로만 수정 가능 (2단계)

**학생의 일정 변경 요청 미지원 (MVP)**:
- **제약사항**: 학생이 직접 일정 변경 요청할 수 없음
- **이유**: 
  - MVP 복잡도 감소
  - 대부분은 보강 시스템으로 해결 가능
- **대응**: 카톡/전화로 직접 협의
- **향후 계획**: 2단계에서 "변경 요청 → 승인/거절" 워크플로우 추가

**시험 일정은 선생님만 등록 (MVP)**:
- **제약사항**: 학생이 직접 시험 일정 입력 불가
- **이유**: 
  - MVP에서는 선생님 중심 관리
  - 학생이 잘못 입력하면 혼란
- **완화책**: 학생이 선생님께 알리면 선생님이 등록
- **향후 계획**: 2단계에서 학생 입력 + 선생님 승인 구조

**보강 시간 오픈은 전체 또는 그룹 단위**:
- **제약사항**: 특정 학생만 선택해서 오픈 불가
- **이유**: 
  - MVP 단순화
  - 대부분은 전체 또는 그룹 단위로 충분
- **완화책**: 그룹을 잘게 나누면 해결 가능
- **향후 계획**: 2단계에서 학생 개별 지정 가능

---

## 11. 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| v1.0 | 2025-10-31 | 초안 작성 | - |

---

## 12. 첨부 자료

- [ ] 와이어프레임 이미지 (정규 수업 등록, 달력 뷰, 보강 시간 오픈)
- [ ] 사용자 플로우 다이어그램 (일정 등록 → 보강 신청 → 승인)
- [ ] 관련 리서치 자료 (문제 정의서 참조)
- [ ] 경쟁 제품 분석 자료 (HANDOVER 문서 참조)

---

**다음 기능**: F-004 출결 관리
